<?xml version="1.0" encoding="utf-8"?><feed xmlns="http://www.w3.org/2005/Atom"><title>His 2nd Life</title><icon>https://his2nd.life/en/static/images/blog-logo.png</icon><subtitle>his2nd.life</subtitle><link href="https://his2nd.life/en/atom.xml" rel="self"/><link href="https://his2nd.life/en"/><updated>2024-01-11T10:52:43.000Z</updated><id>https://his2nd.life/en</id><author><name>Hollis</name></author><generator>h2l-rss</generator><entry><title>Site Bilingual Modification</title><link href="https://his2nd.life/en/posts/7a6a6b5a.html"/><id>https://his2nd.life/en/posts/7a6a6b5a.html</id><published>2024-01-08T07:06:34.000Z</published><updated>2024-01-11T10:52:43.000Z</updated><content type="html"><![CDATA[<p><b>You can visit <a href=https://his2nd.life/en/posts/7a6a6b5a.html target=_blank>https://his2nd.life/en/posts/7a6a6b5a.html</a> for better layout.</b></p><hr><p>This site is now available both in Chinese and in English.</p><span id=more></span><hr><p>Honestly, I don’t know why I have decided to add an English version of my blog — I cannot write fluently in Chinese, let alone in English; I guess it’s only because it’s interesting and also, I want to see if adding another language is feasible.</p><p>Hexo has a limited i18n system which can display a post in multiple languages, yet pages generated by themes are only available in single language. So I took a treacky approach, which is to generate both Chinese site and English site within the same repository, with each site using its own configuration, theme configuration, the <code>source</code> directory, and the <code>public</code> directory; and the rest of the contents required to generate sites such as the <code>scaffolds</code> directory and the <code>scripts</code> directory are shared between these sites. Thus, even though the Chinese site and the English site together is coherent, these are two indivisual sites with each static resources placed in its own <code>public</code> directory. To facilitate site generation, I wrote several scripts which are capable of cleaning up intermediates, including the same custom static resources in the two <code>source</code> directories of both sites, switching the language used to generate the site based on parameters. You may have noticed that there is an “info icon” in the upper right corner of some posts (for example, this one) and pages. It indicates that the page you are reading is available in multiple languages, and you can switch to other versions just by clicking that icon. This feature is supported by a metadata generator, an injector, and a broswer-end runtime script that I wrote. When I intend to write two language versions of a post, I provide an array of paths (each path represents the post in a specific language) in the front-matter, embed the metadata in the page via the metadata generator and the injector, read it in the browser via the injected script, and then display the “info icon”. The “injected script” I mentioned is a script that I used to implement specific features and perform modifications dynamically on the broswer-end. Itself contains some prompt strings, so I also wrote simple i18n functions to provide these strings both in Chinese and in English. Now the website has two language versions, each has a root of <code>/zh-CN/</code> or <code>/en/</code>. However, the previous links that search engines had indexed does not inlude the “language mark”, so I also wrote the <code>index</code> and <code>404</code> page for the entire site to direct visitors to the correct page.</p><p>Basically, this is how I implemented a bilingual Hexo site. Maybe I’ll try to blog in English. Maybe.</p><hr><p>FIN</p>]]></content><summary type="html"><![CDATA[<p>This site is now available both in Chinese and in English.</p>]]></summary><category term="Technologies &amp; Techniques" scheme="https://his2nd.life/en/categories/technologies-and-techniques/"/><category term="Front-end" scheme="https://his2nd.life/en/tags/front-end/"/><category term="JavaScript" scheme="https://his2nd.life/en/tags/javascript/"/></entry></feed>
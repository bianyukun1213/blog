<!DOCTYPE html><html lang="en" dir="ltr"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1"><title>Site Bilingual Modification</title><meta name="keywords" content="Personal blog,Journal,Programming,Movie reviews,TV show reviews,Video game reviews,Book reviews,Thoughts"><meta name="description" content="The author discusses their decision to add an Eng‚Ä¶"><meta property="og:type" content="article"><meta property="og:title" content="Site Bilingual Modification"><meta property="og:url" content="https://his2nd.life/en/posts/7a6a6b5a.html"><meta property="og:site_name" content="His 2nd Life"><meta property="og:description" content="The author discusses their decision to add an Eng‚Ä¶"><meta property="og:locale" content="en_US"><meta property="article:published_time" content="2024-01-08T07:06:34.000Z"><meta property="article:modified_time" content="2024-03-22T11:31:32.000Z"><meta property="article:author" content="Hollis"><meta property="article:tag" content="Front-end"><meta property="article:tag" content="JavaScript"><meta name="twitter:card" content="summary"><link rel="canonical" href="https://his2nd.life/en/posts/7a6a6b5a.html"><meta name="robots" content="all"><link rel="alternate" href="/en/atom.xml" title="His 2nd Life" type="application/atom+xml"><link rel="stylesheet" href="/en/css/third-party/modern-normalize.min.css"><link rel="icon" href="https://bucket.hollisdevhub.com/blog/common/favicon-32.webp"><link rel="me" href="mailto:bianyukun1213@outlook.com"><link rel="me" href="https://yukun.bio/"><link rel="me" href="https://github.com/bianyukun1213"><link rel="me" href="https://m.cmx.im/@Hollis"><link rel="authorization_endpoint" href="https://indieauth.com/auth"><link rel="webmention" href="https://webmention.io/his2nd.life/webmention"><link rel="preconnect" href="https://fonts.googleapis.com"><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin="anonymous"><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Noto+Sans:ital,wght@0,100..900;1,100..900&family=Noto+Serif:ital,wght@0,100..900;1,100..900&family=Noto+Sans+SC&display=swap"><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Caveat&text=Life%20is%20short%2C%20I%E2%80%99m%20gonna%20live%20it%20double!&display=swap"><meta name="generator" content="Hexo 7.3.0"><meta name="generator" content="hexo-theme-tide 1.0.0"><meta name="tide-client-ctx" content="%7B%22progress_marker%22%3A%22%2F%22%2C%22search_db_path%22%3A%22%2Fen%2Fsearch.json%22%2C%22image_viewer%22%3A%7B%22mask_default_title%22%3A%22This%20image%20has%20been%20masked%22%2C%22btn_unmask_default_title%22%3A%22Click%20here%20to%20reveal%22%7D%2C%22interactions%22%3A%7B%22twikoo%22%3A%7B%22env_id%22%3A%22https%3A%2F%2Ftwikoo.his2nd.life%22%2C%22region%22%3A%22%22%7D%2C%22webmentionjs%22%3A%7B%22wordcount%22%3A-1%2C%22max_webmentions%22%3A30%2C%22prevent_spoofing%22%3Afalse%2C%22sort_by%22%3A%22published%22%2C%22sort_dir%22%3A%22up%22%2C%22comments_are_reactions%22%3Afalse%2C%22i18n%22%3A%7B%22replied%22%3A%22replied%22%2C%22liked%22%3A%22liked%22%2C%22reposted%22%3A%22reposted%22%2C%22reacted%22%3A%22reacted%22%2C%22bookmarked%22%3A%22bookmarked%22%2C%22mentioned%22%3A%22mentioned%22%2C%22RSVPed%22%3A%22RSVPed%22%2C%22followed%22%3A%22followed%22%2C%22Responses%22%3A%22Responses%22%2C%22mention%22%3A%22mention%22%2C%22Reactions%22%3A%22Reactions%22%7D%7D%7D%7D"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.6.0/css/all.min.css" integrity="sha512-Kc323vGBEqzTmouAECnVceyQqyqdsSiqLQISBL29aUW4U&#x2F;M7pSPA&#x2F;gEUZQqv1cwx4OnYxTxve5UMg5GT6L4JJg&#x3D;&#x3D;" crossorigin="anonymous" referrerpolicy="no-referrer"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism-tomorrow.min.css" integrity="sha512-vswe+cgvic&#x2F;XBoF1OcM&#x2F;TeJ2FW0OofqAVdCZiEYkd6dwGXthvkSFWOoGGJgS2CW70VK5dQM5Oh+7ne47s74VTg&#x3D;&#x3D;" crossorigin="anonymous" referrerpolicy="no-referrer"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/plugins/line-numbers/prism-line-numbers.min.css" integrity="sha512-cbQXwDFK7lj2Fqfkuxbo5iD1dSbLlJGXGpfTDqbggqjHJeyzx88I3rfwjS38WJag&#x2F;ihH7lzuGlGHpDBymLirZQ&#x3D;&#x3D;" crossorigin="anonymous" referrerpolicy="no-referrer"><link rel="stylesheet" href="/en/css/tide.css"><script src="/en/js/client-utils.js"></script><script src="/en/js/tide.js"></script><link rel="stylesheet" href="/en/css/collapse.css"><meta name="fediverse:creator" content="@Hollis@m.cmx.im"><link rel="stylesheet" href="/shared/third-party/hexo-tag-plugins/tag-image-masonry.css"><link rel="stylesheet" href="/shared/third-party/hexo-tag-plugins/tag-alertbox.css"><link rel="stylesheet" href="/shared/custom.css"><script src="/shared/runtime-site-mod.js"></script></head><body class="un-text-base un-text-txt-prim un-break-words"><script src="https://cdnjs.cloudflare.com/ajax/libs/macy/2.5.1/macy.min.js" integrity="sha512-/o/3HSUNsIEsxRpMb5LdGO+algy6JHTf3tMn2VpWKfVexrEAepEzsuJPA51tJVdC9kCHsN5+Z4GJ35pcldgsGw==" crossorigin="anonymous" referrerpolicy="no-referrer"></script><div id="tide-root" class="un-bg-b-scnd un-absolute un-size-full un-text-base" tide-is-post="true"><div id="tide-sidebar" class="un-sc-trans-default un-bg-bg-sb un-fixed un-h-full un-flex un-flex-col un-justify-between un-z-30 un-text-center un-text-txt-sb"><header class="un-flex-none un-p-8"><p id="tide-site-title" class="un-m-0 un-my-4 un-font-bold">His 2nd Life</p><p id="tide-site-subtitle" class="un-m-0 un-my-2 un-font-italic">Life is short, I‚Äôm gonna live it double!</p></header><div class="h-card un-hidden"><span class="p-name">Bian Yukun</span> <span class="p-given-name">Yukun</span> <span class="p-family-name">Bian</span> <span class="p-nickname">Hollis</span> <img class="u-photo" src="https://bucket.hollisdevhub.com/blog/common/avatar.webp" alt="Bian Yukun" loading="lazy"> <a class="u-url u-uid" target="_blank" rel="noopener" href="https://yukun.bio/">yukun.bio</a><a class="u-url u-uid" href="https://his2nd.life/">His 2nd Life</a><a class="u-url u-uid" target="_blank" rel="noopener" href="https://m.cmx.im/@Hollis">Mastodon</a><a class="u-url u-uid" target="_blank" rel="noopener" href="https://github.com/bianyukun1213">GitHub</a><a class="u-email" href="mailto:bianyukun1213@outlook.com">bianyukun1213@outlook.com</a><div class="p-note">Just a **S**illy **B**oy.</div></div><nav id="tide-navigation" class="un-w-full un-flex-initial un-self-center"><ul class="un-w-auto un-inline-flex un-flex-col un-items-start un-p-0 un-m-0 un-list-none"><li class="un-inline-block un-mb-8"><i class="fa-solid fa-house un-me-4" aria-hidden="true"></i><a class="un-sc-link-plain un-text-txt-sb!" href="/en/">Home</a></li><li class="un-inline-block un-mb-8"><i class="fa-solid fa-folder-open un-me-4" aria-hidden="true"></i><a class="un-sc-link-plain un-text-txt-sb!" href="/en/categories/">Categories</a></li><li class="un-inline-block un-mb-8"><i class="fa-solid fa-tag un-me-4" aria-hidden="true"></i><a class="un-sc-link-plain un-text-txt-sb!" href="/en/tags/">Tags</a></li><li class="un-inline-block un-mb-8"><i class="fa-solid fa-hand-pointer un-me-4" aria-hidden="true"></i><a class="un-sc-link-plain un-text-txt-sb!" href="/en/neighbors/">Neighbors</a></li><li class="un-inline-block un-mb-8"><i class="fa-solid fa-circle-info un-me-4" aria-hidden="true"></i><a class="un-sc-link-plain un-text-txt-sb!" href="/en/about/">About</a></li><li class="un-inline-block un-mb-8"><i class="fa-solid fa-rss un-me-4" aria-hidden="true"></i><a class="un-sc-link-plain un-text-txt-sb!" href="/en/atom.xml" target="_blank">RSS</a></li></ul></nav><footer class="un-flex-none un-p-8"><a id="travelling-link" href="https://www.travellings.cn/plain.html" target="_self" rel="noopener" title="ÂºÄÂæÄ-ÂèãÈìæÊé•Âäõ"><img id="travelling-logo" src="https://www.travellings.cn/assets/logo.svg" alt="ÂºÄÂæÄ-ÂèãÈìæÊé•Âäõ" loading="lazy"></a><div class="un-m-0 un-my-4 un-text-txt-sb" dir="ltr"><a class="un-sc-link-plain un-text-txt-sb!" href="https://xn--sr8hvo.ws/previous" target="_self" rel="noopener">‚Üê</a> An <a class="un-sc-link-plain un-text-txt-sb!" href="https://xn--sr8hvo.ws" target="_blank" rel="noopener">IndieWeb Webring</a> üï∏üíç <a class="un-sc-link-plain un-text-txt-sb!" href="https://xn--sr8hvo.ws/next" target="_self" rel="noopener">‚Üí</a></div><p id="tide-icp-record" class="un-m-0 un-my-4"><a class="un-sc-link-plain un-text-txt-sb!" target="_blank" rel="noopener" href="https://icp.gov.moe/?keyword=20230041">ËêåICPÂ§á20230041Âè∑</a></p><p id="tide-generated-by-hexo-and-theme-tide" class="un-m-0 un-my-4">Generated by<span class="un-i-logos-hexo un-mx-1"></span><a class="un-sc-link-plain un-text-txt-sb!" href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a> & <a class="un-sc-link-plain un-text-txt-sb!" href="https://github.com/bianyukun1213/hexo-theme-tide" target="_blank" rel="noopener">hexo-theme-tide</a></p></footer></div><div id="tide-content" class="un-sc-trans-default un-fixed un-size-full un-flex un-flex-col"><header id="tide-top-bar" class="un-bg-bg-prim un-h-16 un-flex un-justify-stretch un-items-center un-overflow-auto"><div class="un-w-1/4 un-min-w-18 un-h-12"><button id="tide-btn-nav" class="un-sc-btn-default un-relative un-float-start un-size-12 un-ms-4" title="Navigation menu"><i id="tide-btn-nav-icon-bars" class="fa-solid fa-bars" aria-hidden="true"></i><i id="tide-btn-nav-icon-close" class="fa-solid fa-close" aria-hidden="true"></i></button></div><div class="un-w-3/4 un-min-w-30 un-h-12"><button id="tide-btn-search" class="un-sc-btn-default un-relative un-float-end un-end-14 un-size-12 un-me-4" title="Search"><i class="fa-solid fa-magnifying-glass" aria-hidden="true"></i></button> <button id="tide-btn-switch-color-scheme" class="un-sc-btn-default un-relative un-float-end -un-end-16 un-size-12 un-me-4" title="Color scheme"><i id="tide-btn-nav-icon-sun" class="fa-solid fa-sun" aria-hidden="true"></i><i id="tide-btn-nav-icon-moon" class="fa-solid fa-moon" aria-hidden="true"></i></button> <button id="tide-btn-settings" class="un-hidden un-sc-btn-default un-relative un-float-end -un-end-16 un-size-12 un-me-4" title="Settings"><i class="fa-solid fa-gear" aria-hidden="true"></i></button></div></header><main id="tide-main-content" class="un-bg-bg-prim un-flex-1 un-overflow-auto"><article id="tide-post" class="h-entry"><h1 id="tide-page-title" class="p-name un-m-0 un-mb-2 un-text-4xl un-text-txt-prim un-font-bold">Site Bilingual Modification</h1><div class="tide-post-meta un-mb-4 un-text-txt-scnd"><span class="tide-post-meta-author un-inline-block un-me-8" title="Author"><i class="fa-solid fa-user un-me-1" aria-hidden="true"></i>Hollis </span><span class="tide-post-meta-date un-inline-block un-me-8" title="Publish time"><i class="fa-solid fa-pen un-me-1" aria-hidden="true"></i><time datetime="2024-01-08T07:06:34.000Z">2024-01-08 15:06:34</time> </span><span class="tide-post-meta-updated un-inline-block un-me-8" title="Update time"><i class="fa-solid fa-wrench un-me-1" aria-hidden="true"></i><time datetime="2024-03-22T11:31:32.000Z">2024-03-22 19:31:32</time> </span><span class="tide-post-meta-categories un-inline-block un-me-8" title="Category"><i class="fa-solid fa-folder-open un-me-1" aria-hidden="true"></i><a class="un-sc-link-plain un-text-txt-scnd!" href="/en/categories/technologies-and-studies/">Technologies &amp; studies</a> </span><span class="tide-post-meta-tags un-inline-block un-me-8" title="Tags"><i class="fa-solid fa-tag un-me-1" aria-hidden="true"></i><a class="un-sc-link-plain un-text-txt-scnd!" href="/en/tags/front-end/">Front-end</a>, <a class="un-sc-link-plain un-text-txt-scnd!" href="/en/tags/javascript/">JavaScript</a> </span><span class="tide-post-meta-word-count un-inline-block un-me-8" title="Word count"><i class="fa-solid fa-keyboard un-me-1" aria-hidden="true"></i>471 </span><span class="tide-post-meta-reading-time un-inline-block un-me-8" title="Estimated reading time"><i class="fa-solid fa-clock un-me-1" aria-hidden="true"></i>2 mins. </span><span class="tide-post-meta-copyright un-inline-block un-me-8" title="Copyright notice"><i class="fa-solid fa-copyright un-me-1" aria-hidden="true"></i>CC-BY-SA 4.0 </span><span class="tide-post-meta-description un-inline-block un-me-8" title="Description"><i class="fa-solid fa-comment-dots un-me-1" aria-hidden="true"></i>The author discusses their decision to add an Eng‚Ä¶</span></div><div class="tide-hidden-microformats2-group un-hidden"><a class="u-url" href="https://his2nd.life/en/posts/7a6a6b5a.html">https://his2nd.life/en/posts/7a6a6b5a.html</a><p class="p-summary">This site is now available both in Chinese and in English.</p><div class="h-card p-author un-hidden"><span class="p-name">Bian Yukun</span> <span class="p-given-name">Yukun</span> <span class="p-family-name">Bian</span> <span class="p-nickname">Hollis</span> <img class="u-photo" src="https://bucket.hollisdevhub.com/blog/common/avatar.webp" alt="Bian Yukun" loading="lazy"> <a class="u-url u-uid" target="_blank" rel="noopener" href="https://yukun.bio/">yukun.bio</a><a class="u-url u-uid" href="https://his2nd.life/">His 2nd Life</a><a class="u-url u-uid" target="_blank" rel="noopener" href="https://m.cmx.im/@Hollis">Mastodon</a><a class="u-url u-uid" target="_blank" rel="noopener" href="https://github.com/bianyukun1213">GitHub</a><a class="u-email" href="mailto:bianyukun1213@outlook.com">bianyukun1213@outlook.com</a><div class="p-note">Just a **S**illy **B**oy.</div></div><time class="dt-published" datetime="2024-01-08T07:06:34.000Z">2024-01-08T07:06:34.000Z</time> <time class="dt-updated" datetime="2024-03-22T11:31:32.000Z">2024-03-22T11:31:32.000Z</time> <a class="p-category" href="https://his2nd.life/en/categories/technologies-and-studies/">Technologies &amp; studies</a></div><div class="e-content un-prose un-max-w-none"><p>This site is now available both in Chinese and in English.</p><span id="more"></span><hr><p>Honestly, I don‚Äôt know why I have decided to add an English version of my blog ‚Äî I cannot write fluently in Chinese, let alone in English; I guess it‚Äôs only because it‚Äôs interesting and also, I want to see if adding another language is feasible.</p><p>Hexo has a limited i18n system which can display a post in multiple languages, yet pages generated by themes are only available in single language. So I took a treacky approach, which is to generate both Chinese site and English site within the same repository, with each site using its own configuration, theme configuration, the <code>source</code> directory, and the <code>public</code> directory; and the rest of the contents required to generate sites such as the <code>scaffolds</code> directory and the <code>scripts</code> directory are shared between these sites. Thus, even though the Chinese site and the English site together is coherent, these are two indivisual sites with each static resources placed in its own <code>public</code> directory. To facilitate site generation, I wrote several scripts which are capable of cleaning up intermediates, including some of the same resources in the two <code>source</code> directories of both sites, switching the language used to generate the site based on parameters. You may have noticed that there is an ‚Äúinfo icon‚Äù (It has moved to the lower right corner as a ‚Äúlanguage button‚Äù for now.) in the upper right corner of some posts (for example, this one) and pages. It indicates that the page you are reading is available in multiple languages, and you can switch to other versions just by clicking that icon. This feature is supported by a metadata generator and filter, an injector, and a broswer-end runtime script that I wrote. When I intend to write two language versions of a post, I provide an array of paths (each path represents the post in a specific language) in the front-matter, embed the metadata in the page via the metadata generator and filter, read it in the browser via the broswer-end script injected by the injector, and then display the ‚Äúinfo icon‚Äù. The broswer-end script I mentioned is a script that I use to implement specific features and perform modifications dynamically. This script itself contains some prompt strings, so I also wrote simple i18n functions to provide these strings both in Chinese and in English. Now the website has two language versions, each has a root of <code>/zh-CN/</code> or <code>/en/</code>. However, the previous links that search engines had indexed does not inlude the ‚Äúlanguage mark‚Äù, so I also wrote the <code>index</code> and <code>404</code> page for the entire site to direct visitors to the correct page.</p><p>Basically, this is how I implemented a bilingual Hexo site. Maybe I‚Äôll try to blog in English. Maybe.</p><hr><p>The End</p></div></article><nav id="tide-page-nav" class="un-flex un-flex-wrap un-justify-between un-gap-4 un-my-4"><a class="un-sc-link-plain un-text-txt-scnd! un-me-auto" title="Previous" href="/en/posts/127efb3.html"><i class="fa-solid fa-angle-left un-me-1" aria-hidden="true"></i><span>IndieWeb Implementation Test</span></a></nav><aside id="tide-page-interactions" class="un-mt-4"><div class="un-mb-4"><h2 class="un-inline-block un-align-middle un-m-0 un-me-4 un-text-2xl un-font-bold"><label for="tide-select-active-interaction">Interactions</label></h2><select id="tide-select-active-interaction" name="tide-active-interaction" class="un-sc-select-plain un-align-bottom"><option value="twikoo">Twikoo</option><option value="webmentionjs">webmention.js</option></select></div><div id="tide-active-interaction"><div id="tide-interaction-twikoo-wrapper" style="display:none" dir="ltr"><div id="tide-interaction-twikoo"></div><script src="https://cdnjs.cloudflare.com/ajax/libs/twikoo/1.6.41/twikoo.all.min.js" integrity="sha512-cdLlE9nnzcJXQoy9eFuzGcpQXx70rXxmUNpvrvYTAwQv2txLSdvEUs+eILIyKVFBvAoUm9iUR73ewSD3IiGZ&#x2F;w&#x3D;&#x3D;" crossorigin="anonymous" referrerpolicy="no-referrer" defer></script><script>"use strict";window.tideInteractions||(window.tideInteractions={}),window.tideInteractions.twikoo={load:function(){let t=getPageLang().toLowerCase();t in{zh:0,"zh-cn":0,"zh-hk":1,"zh-tw":2,"en-us":3,"en-gb":3,en:3,uz:4,"uz-uz":4,ja:5,"ja-jp":5}||(t="en"),void 0===this.load.twikooInited&&(this.load.twikooInited=!1),document.getElementById("tide-interaction-twikoo-wrapper").style.display="block",this.load.twikooInited||twikoo.init({envId:clientCtx.interactions.twikoo.env_id,el:"#tide-interaction-twikoo",region:clientCtx.interactions.twikoo.region,path:window.location.pathname,lang:t}).then((()=>{this.load.twikooInited=!0}))},unload:function(){document.getElementById("tide-interaction-twikoo-wrapper").style.display="none"}}</script></div><div id="tide-interaction-webmentionjs-wrapper" style="display:none"><div id="tide-interaction-webmentionjs"></div><link rel="stylesheet" href="/en/css/third-party/webmention.css"><script src="/en/js/third-party/webmention.js" data-id="tide-interaction-webmentionjs" defer data-max-webmentions="30" data-sort-by="published" data-sort-dir="up"></script><script>"use strict";window.tideInteractions||(window.tideInteractions={}),window.tideInteractions.webmentionjs={load:function(){document.getElementById("tide-interaction-webmentionjs-wrapper").style.display="block"},unload:function(){document.getElementById("tide-interaction-webmentionjs-wrapper").style.display="none"},i18n:function(n){return clientCtx.interactions.webmentionjs.i18n[n]||n}}</script></div></div><script>"use strict";!function(){let t;function n(n){const e=document.getElementById("tide-select-active-interaction");function o(){for(const n in window.tideInteractions)if(Object.prototype.hasOwnProperty.call(window.tideInteractions,n)){const e=window.tideInteractions[n];n===t?e.load():e.unload()}}e.addEventListener("change",(function(n){t=e.value,o()})),t=e.value,o()}"loading"!==document.readyState?n():document.addEventListener("DOMContentLoaded",n)}()</script></aside><div id="tide-floating-utils" class="un-fixed un-bottom-16 un-end-4 un-max-h-1/2 un-flex un-flex-col un-flex-wrap-reverse un-gap-2"><button id="tide-btn-scroll-to-top" class="un-sc-btn-default un-size-12" title="Scroll to top"><i class="fa-solid fa-arrow-up" aria-hidden="true"></i></button> <button id="tide-btn-open-toc" class="un-sc-btn-default un-size-12" title="Table of Content"><i class="fa-solid fa-bars-staggered" aria-hidden="true"></i></button> <button id="tide-btn-switch-lang" class="un-sc-btn-default un-size-12" title="Languages"><i class="fa-solid fa-language" aria-hidden="true"></i></button></div></main></div></div><dialog id="tide-dialog-image-viewer" class="tide-dialog un-sc-dlg-fullscreen"><div class="tide-dialog-mask un-sc-dlg-mask"><div class="tide-image-mask un-z-110"><div class="tide-image-mask-controls"><p id="tide-image-viewer-mask-title"></p><a id="tide-image-viewer-btn-unmask-image" href="javascript:void(0);"></a></div></div><img id="tide-viewing-image" loading="lazy" tabindex="0"></div><div id="tide-image-viewer-toolbar" class="tide-dialog-container un-bg-black/75 un-fixed un-bottom-0 un-left-1/2 -un-translate-x-1/2 un-p-4 un-mb-4 un-w-100 un-max-w-full un-max-h-2/5 un-rounded-2xl un-text-base un-text-white un-overflow-auto un-z-120"><div id="tide-viewing-image-title" class="un-mb-2 un-text-center un-text-xl"></div><div id="tide-image-viewer-counter" class="un-mb-4 un-text-center"></div><div id="tide-image-viewer-controls" class="un-flex un-flex-wrap un-justify-between un-gap-4 un-mx-auto"><button id="tide-image-viewer-btn-prev" class="un-sc-btn-default un-bg-transparent un-text-white un-border-white un-rounded-full un-size-12 un-shrink-0" title="Previous"><i class="fa-solid fa-angle-left" aria-hidden="true"></i></button> <button id="tide-image-viewer-btn-next" class="un-sc-btn-default un-bg-transparent un-text-white un-border-white un-rounded-full un-size-12 un-shrink-0" title="Next"><i class="fa-solid fa-angle-right" aria-hidden="true"></i></button> <button id="tide-image-viewer-btn-zoom-in" class="un-sc-btn-default un-bg-transparent un-text-white un-border-white un-rounded-full un-size-12 un-shrink-0" title="Zoom in"><i class="fa-solid fa-magnifying-glass-plus" aria-hidden="true"></i></button> <button id="tide-image-viewer-btn-zoom-out" class="un-sc-btn-default un-bg-transparent un-text-white un-border-white un-rounded-full un-size-12 un-shrink-0" title="Zoom out"><i class="fa-solid fa-magnifying-glass-minus" aria-hidden="true"></i></button> <button id="tide-image-viewer-btn-close" class="un-sc-btn-default un-bg-transparent un-text-white un-border-white un-rounded-full un-size-12 un-shrink-0" title="Close"><i class="fa-solid fa-xmark" aria-hidden="true"></i></button> <button id="tide-image-viewer-btn-collapse-toolbar" class="un-sc-btn-default un-bg-transparent un-text-white un-border-white un-rounded-full un-size-12 un-shrink-0" title="Collapse the toolbar"><i class="fa-solid fa-down-left-and-up-right-to-center" aria-hidden="true"></i></button></div></div><div id="tide-image-viewer-mini-toolbar" class="un-bg-black/75 un-fixed un-bottom-0 un-end-0 un-m-4 un-p-2 un-rounded-full un-text-base un-text-white un-z-120"><div id="tide-image-viewer-mini-controls" class="un-flex un-flex-wrap un-justify-between un-gap-2 un-mx-auto"><button id="tide-image-viewer-btn-close-2" class="un-sc-btn-default un-bg-transparent un-text-white un-border-white un-rounded-full un-size-12 un-shrink-0" title="Close"><i class="fa-solid fa-xmark" aria-hidden="true"></i></button> <button id="tide-image-viewer-btn-expand-toolbar" class="un-sc-btn-default un-bg-transparent un-text-white un-border-white un-rounded-full un-size-12 un-shrink-0" title="Expand the toolbar"><i class="fa-solid fa-up-right-and-down-left-from-center" aria-hidden="true"></i></button></div></div></dialog><script src="/en/js/third-party/pinch-zoom.umd.min.js" defer></script><script>"use strict";!function(){function e(e){const t=document.getElementById("tide-dialog-image-viewer"),n=document.querySelector(".tide-dialog-mask:has(#tide-viewing-image)"),i=document.getElementById("tide-image-viewer-toolbar"),o=document.getElementById("tide-viewing-image"),a=(document.querySelector("#tide-dialog-image-viewer .tide-image-mask"),document.getElementById("tide-image-viewer-mask-title")),s=document.getElementById("tide-image-viewer-btn-unmask-image"),d=document.getElementById("tide-viewing-image-title"),r=document.getElementById("tide-image-viewer-counter"),l=document.getElementById("tide-image-viewer-btn-prev"),c=document.getElementById("tide-image-viewer-btn-next"),m=document.getElementById("tide-image-viewer-btn-zoom-in"),u=document.getElementById("tide-image-viewer-btn-zoom-out"),g=document.getElementById("tide-image-viewer-btn-close"),f=document.getElementById("tide-image-viewer-btn-close-2"),v=document.getElementById("tide-image-viewer-btn-collapse-toolbar"),y=document.getElementById("tide-image-viewer-mini-toolbar"),b=document.getElementById("tide-image-viewer-btn-expand-toolbar"),w=!!isPageRtl(),p=new PinchZoom.default(o,{listenOnElementNotContainer:!0,useMouseWheel:!0,rtl:w,minZoom:.25,maxZoom:4,zoomOutFactor:0,onDragStart:function(e,t){o.style.cursor="grabbing"},onDragEnd:function(e,t){o.style.cursor="grab"}});p.enable();const k={"user-drag":"none","-webkit-user-drag":"none","user-select":"none","-moz-user-select":"none","-webkit-user-select":"none","-ms-user-select":"none",cursor:"grab"};for(const e in k)Object.prototype.hasOwnProperty.call(k,e)&&(o.style[e]=k[e]);o.addEventListener("dragstart",(()=>{}));const E=[...document.querySelectorAll("#tide-page .un-prose :not(a)>img:not([display=none]):not(.tide-hidden-to-image-viewer), #tide-post .un-prose :not(a)>img:not([display=none]):not(.tide-hidden-to-image-viewer)")],h=E.length;for(const e of E)e.style.cursor="zoom-in",e.addEventListener("click",(function(e){x=E.indexOf(e.target),O()})),e.addEventListener("keydown",(function(e){"Enter"===e.key&&(e.preventDefault(),x=E.indexOf(e.target),O())}));let x;function L(e){const t=E[e];o.src=t.src,o.alt=t.alt;const n=t.getAttribute("data-mask"),i=t.getAttribute("data-unmasked");!function(e){let t=clientCtx.image_viewer.mask_default_title,n=clientCtx.image_viewer.btn_unmask_default_title;if(e){const i=e.split("|");1===i.length?t=i[0]:2===i.length&&(t=i[0],n=i[1])}a.innerHTML=t,s.innerHTML=n}(n),null!==n?o.setAttribute("data-mask",n):o.removeAttribute("data-mask"),null!==i?o.setAttribute("data-unmasked",i):o.removeAttribute("data-unmasked"),t.title?(o.title=t.title,d.textContent=t.title,d.style.display="block"):(o.title="",d.textContent="",d.style.display="none"),r.textContent=x+1+clientCtx.progress_marker+h,p.zoomFactor=1,p.lastScale=1,p.resetOffset()}function A(){x<=0?x=h-1:--x,L(x)}function I(){x>=h-1?x=0:++x,L(x)}function B(e){const t=p.getInitialZoomFactor()*p.zoomFactor,n={x:-p.offset.x+p.el.offsetWidth*t/2,y:-p.offset.y+p.el.offsetHeight*t/2},i=Math.max(Math.min(p.options.maxZoom,p.lastScale+e),p.options.minZoom),o=i/p.lastScale;p.scale(o,n),p.lastScale=i,p.update()}function D(e){const t=p.getInitialZoomFactor()*p.zoomFactor,n={x:-p.offset.x+p.el.offsetWidth*t/2,y:-p.offset.y+p.el.offsetHeight*t/2},i=Math.min(Math.max(p.options.minZoom,p.lastScale-e),p.options.maxZoom),o=i/p.lastScale;p.scale(o,n),p.lastScale=i,p.update()}function S(e){p.offset.x+=e.x,p.offset.y+=e.y,p.offset=p.sanitizeOffset(p.offset),p.update()}function z(e){S({x:0,y:-e})}function M(e){S({x:-e,y:0})}function O(){L(x),t.showModal(),c.focus()}function Z(){i.style.visibility="visible",y.style.visibility="hidden",c.focus()}s.addEventListener("click",(()=>{null!==o.getAttribute("data-mask")&&(o.setAttribute("data-unmasked",""),E[x].setAttribute("data-unmasked",""))})),l.addEventListener("click",(()=>{A()})),c.addEventListener("click",(()=>{I()})),m.addEventListener("click",(()=>{B(.2)})),u.addEventListener("click",(()=>{D(.2)})),g.addEventListener("click",(()=>{t.close()})),f.addEventListener("click",(()=>{t.close()})),v.addEventListener("click",(()=>{i.style.visibility="hidden",y.style.visibility="visible",o.focus()})),b.addEventListener("click",(()=>{Z()})),o.addEventListener("keydown",(function(e){const t=n.offsetWidth/20,i=n.offsetHeight/20;switch(e.key){case"ArrowUp":z(-t),e.preventDefault(),e.stopPropagation();break;case"ArrowDown":z(t),e.preventDefault(),e.stopPropagation();break;case"ArrowLeft":M(-i),e.preventDefault(),e.stopPropagation();break;case"ArrowRight":M(i),e.preventDefault(),e.stopPropagation()}})),t.addEventListener("keydown",(function(e){switch(e.key){case"ArrowUp":B(.1),e.preventDefault();break;case"ArrowDown":D(.1),e.preventDefault();break;case"ArrowLeft":w?I():A(),e.preventDefault();break;case"ArrowRight":w?A():I(),e.preventDefault()}})),Z()}"loading"!==document.readyState?e():document.addEventListener("DOMContentLoaded",e),window.addEventListener("hexo-blog-decrypt",(()=>{e()}))}()</script><dialog id="tide-dialog-toc" class="tide-dialog un-sc-dlg-fullscreen"><div class="tide-dialog-mask un-sc-dlg-mask"><div id="tide-toc-panel" class="tide-side-panel un-fixed un-end-0 un-h-full un-bg-bg-scnd un-flex un-flex-col"><div class="un-w-full un-p-4 un-flex-none un-flex un-justify-between un-gap-4"><h2 class="un-m-0 un-text-2xl un-font-bold un-leading-12 un-overflow-hidden un-text-ellipsis">Table of Content</h2><button id="tide-toc-btn-close" class="un-sc-btn-default un-flex-none un-size-12" title="Close"><i class="fa-solid fa-close" aria-hidden="true"></i></button></div><div id="tide-toc-content" class="tide-side-panel-content un-w-full un-p-4 un-h-full un-grow-1 un-shrink-1 un-overflow-auto"></div></div></div></dialog><script>"use strict";!function(){function e(e){const t=document.getElementById("tide-dialog-toc"),n=document.querySelector("#tide-dialog-toc .tide-dialog-mask"),o=document.getElementById("tide-toc-panel"),d=document.getElementsByClassName("tide-toc-link"),c=document.getElementById("tide-toc-btn-close");n.addEventListener("click",(()=>{i()})),o.addEventListener("click",(function(e){e.stopPropagation()}));for(const e of d)e.addEventListener("click",(function(e){const t=decodeURIComponent(e.currentTarget.href.split("#")[1]),n=document.getElementById(t);n&&(document.getElementById("tide-main-content").scrollTo({top:n.offsetTop-document.getElementById("tide-top-bar").clientHeight,behavior:"smooth"}),e.preventDefault()),i()}));function i(){t.close()}c.addEventListener("click",(()=>{i()}))}"loading"!==document.readyState?e():document.addEventListener("DOMContentLoaded",e)}()</script><dialog id="tide-dialog-lang-picker" class="tide-dialog un-sc-dlg-fullscreen"><div class="tide-dialog-mask un-sc-dlg-mask"><div id="tide-lang-picker-panel" class="tide-side-panel un-fixed un-end-0 un-h-full un-bg-bg-scnd un-flex un-flex-col"><div class="un-w-full un-p-4 un-flex-none un-flex un-justify-between un-gap-4"><h2 class="un-m-0 un-text-2xl un-font-bold un-leading-12 un-overflow-hidden un-text-ellipsis">Switch language</h2><button id="tide-lang-picker-btn-close" class="un-sc-btn-default un-flex-none un-size-12" title="Close"><i class="fa-solid fa-close" aria-hidden="true"></i></button></div><div id="tide-lang-picker-content" class="tide-side-panel-content un-w-full un-p-4 un-h-full un-grow-1 un-shrink-1 un-overflow-auto"><h3 class="un-m-0 un-mb-4 un-text-xl un-font-bold un-overflow-hidden un-text-ellipsis" dir="ltr">[English]</h3><span class="un-inline-block un-mb-4 un-text-txt-scnd un-font-bold" dir="ltr" title="English">/en/posts/7a6a6b5a.html</span><h3 class="un-m-0 un-mb-4 un-text-xl un-font-bold un-overflow-hidden un-text-ellipsis" dir="ltr">ÁÆÄ‰Ωì‰∏≠Êñá</h3><a class="un-sc-link-default un-inline-block un-mb-4 un-text-txt-scnd!" dir="ltr" title="ÁÆÄ‰Ωì‰∏≠Êñá" href="/zh-CN/posts/7a6a6b5a.html" target="_self">/zh-CN/posts/7a6a6b5a.html</a></div></div></div></dialog><script>"use strict";!function(){function e(e){const t=document.getElementById("tide-dialog-lang-picker"),n=document.querySelector("#tide-dialog-lang-picker .tide-dialog-mask"),d=document.getElementById("tide-lang-picker-panel"),i=document.getElementById("tide-lang-picker-btn-close");function c(){t.close()}n.addEventListener("click",(()=>{c()})),d.addEventListener("click",(function(e){e.stopPropagation()})),i.addEventListener("click",(()=>{c()}))}"loading"!==document.readyState?e():document.addEventListener("DOMContentLoaded",e)}()</script><dialog id="tide-dialog-search" class="tide-dialog un-sc-dlg-fullscreen"><div class="tide-dialog-mask un-sc-dlg-mask"><search id="tide-search-panel" class="un-absolute un-start-1/2 un-top-1/10 -un-translate-x-1/2 un-w-200 un-max-w-full un-h-4/5 un-flex un-flex-col un-justfy-between un-gap-1 un-overflow-hidden"><div class="un-w-full un-flex un-justify-between un-gap-1 un-flex-none"><input id="tide-search-box" class="un-sc-input-plain un-w-0 un-h-12 un-flex-1" type="search" placeholder="Type here to search‚Ä¶" autocomplete="off"> <button id="tide-search-btn-close" class="un-sc-btn-plain un-size-12 un-flex-none" title="Close"><i class="fa-solid fa-close" aria-hidden="true"></i></button></div><div class="un-bg-bg-scnd un-border-2 un-border-txt-prim un-border-solid un-w-full un-max-h-full un-overflow-auto"><p id="tide-search-result-placeholder" class="un-m-0 un-my-4 un-text-center">No result</p><div id="tide-search-results" class="un-w-full un-px-4" style="display:none"></div></div></search></div></dialog><script src="/en/js/third-party/search.js" defer></script><script>"use strict";!function(){function e(e){const t=new LocalSearch({path:clientCtx.search_db_path});t.fetchData();const n=document.getElementById("tide-dialog-search"),d=document.querySelector("#tide-dialog-search .tide-dialog-mask"),i=document.getElementById("tide-search-panel"),c=document.getElementById("tide-search-box"),l=document.getElementById("tide-search-btn-close"),o=document.getElementById("tide-search-result-placeholder"),s=document.getElementById("tide-search-results");function a(){n.close()}d.addEventListener("click",(()=>{a()})),i.addEventListener("click",(function(e){e.stopPropagation()})),c.addEventListener("input",(()=>{!function(){if(!t.isfetched)return;const e=c.value.trim().toLowerCase(),n=e.split(/[-\s]+/);let d=[];e.length>0&&(d=t.getResultItems(n));1===n.length&&""===n[0]||0===d.length?(o.style.display="block",s.style.display="none"):(o.style.display="none",s.style.display="block",d.sort(((e,t)=>e.includedCount!==t.includedCount?t.includedCount-e.includedCount:e.hitCount!==t.hitCount?t.hitCount-e.hitCount:t.id-e.id)),s.innerHTML=`<ul id="tide-search-result-list">${d.map((e=>e.item)).join("")}</ul>`)}()})),l.addEventListener("click",(()=>{a()}))}"loading"!==document.readyState?e():document.addEventListener("DOMContentLoaded",e)}()</script><script src="/en/js/collapse.js"></script><script>
    if(!('loading' in HTMLImageElement.prototype)) {
        const srp = document.createElement('script');
        srp.src = 'https://cdn.jsdelivr.net/npm/lazysizes@5.1.1/lazysizes.min.js';
        document.body.append(srp);
        const imgs = document.querySelectorAll('img');
        imgs.forEach(el => {
            el.setAttribute('data-src', el.getAttribute('src'));
            el.removeAttribute('src');
            el.classList.add('lazyload');
    })
}
</script></body></html>
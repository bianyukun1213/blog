<!DOCTYPE html><html lang="zh-CN"><head><link rel="stylesheet" href="/shared/third-party/hexo-tag-plugins/tag-image-masonry.css"><link rel="stylesheet" href="/shared/third-party/hexo-tag-plugins/tag-alertbox.css"><link rel="stylesheet" href="/shared/third-party/mastodon-timeline/mastodon-timeline.min.css"><link rel="stylesheet" href="/shared/dependencies/layui/css/layui.css"><link id="layui-theme-dark" rel="stylesheet"><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1"><meta name="keywords" content="他的第二人生,His 2nd Life,His Second Life,his2ndlife,边宇琨,Hollis,bianyukun1213,仿生人会涮电子羊吗,BG2EEO"><meta name="author" content="Hollis"><link rel="preconnect" href="https://fonts.googleapis.com"><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin=""><link rel="canonical" href="https://his2nd.life/zh-CN/posts/d2b23a8d.html"><meta name="robots" content="index,follow"><meta name="googlebot" content="index,follow"><meta name="revisit-after" content="1 days"><meta name="description" content="五一的时候把家中自组的 NAS 从 Windows 10 系统换到了 Unraid OS，在此记录一下配置与注意事项，以便之后重装有得参考。"><meta property="og:type" content="article"><meta property="og:title" content="Unraid OS 踩坑记录"><meta property="og:url" content="https://his2nd.life/zh-CN/posts/d2b23a8d.html"><meta property="og:site_name" content="他的第二人生"><meta property="og:description" content="五一的时候把家中自组的 NAS 从 Windows 10 系统换到了 Unraid OS，在此记录一下配置与注意事项，以便之后重装有得参考。"><meta property="og:locale" content="zh_CN"><meta property="article:published_time" content="2023-05-20T06:12:36.000Z"><meta property="article:modified_time" content="2024-01-17T07:31:10.000Z"><meta property="article:author" content="Hollis"><meta property="article:tag" content="NAS"><meta property="article:tag" content="Unraid OS"><meta property="article:tag" content="GNU/Linux"><meta name="twitter:card" content="summary"><link rel="icon" type="image/png" href="/zh-CN/images/favicon-32.png" sizes="192x192"><link rel="apple-touch-icon" sizes="180x180" href="/zh-CN/images/favicon-32.png"><meta name="theme-color" content="#a31f34"><link rel="shortcut icon" href="/zh-CN/images/favicon-32.png"><title>Unraid OS 踩坑记录 - 他的第二人生</title><link rel="stylesheet" href="/zh-CN/fonts/Chillax/chillax.css"><link rel="stylesheet" href="/zh-CN/css/style.css"><link rel="stylesheet" href="/zh-CN/assets/build/styles.css"><link rel="stylesheet" href="/zh-CN/fonts/fonts.css"><link rel="stylesheet" href="/zh-CN/fonts/Satoshi/satoshi.css"><script id="hexo-configurations">window.config={hostname:"his2nd.life",root:"/zh-CN/",language:"zh-CN",path:"search.json"},window.theme={articles:{style:{font_size:"16px",line_height:1.5,image_border_radius:"14px",image_alignment:"center",image_caption:!0,link_icon:!0,title_alignment:"left"},word_count:{enable:!0,count:!0,min2read:!0},author_label:{enable:!1,auto:!1,list:[]},code_block:{copy:!0,style:"mac",font:{enable:!1,family:null,url:null}},toc:{enable:!0,max_depth:3,number:!1,expand:!0,init_open:!0},copyright:{enable:!0,default:"cc_by_nc_sa"},lazyload:!1,recommendation:{enable:!1,title:"推荐阅读",limit:3,mobile_limit:2,placeholder:"",skip_dirs:[]}},colors:{primary:"#a31f34",secondary:null},global:{fonts:{chinese:{enable:!1,family:null,url:null},english:{enable:!1,family:null,url:null}},content_max_width:"1000px",sidebar_width:"210px",hover:{shadow:!0,scale:!0},scroll_progress:{bar:!0,percentage:!0},website_counter:{url:"",enable:!0,site_pv:!0,site_uv:!1,post_pv:!0},single_page:!1,preloader:!1,open_graph:!0,google_analytics:{enable:!1,id:null}},home_banner:{enable:!0,style:"fixed",image:{light:"https://bucket.hollisdevhub.com/blog/pages/index/banner-light.webp",dark:"https://bucket.hollisdevhub.com/blog/pages/index/banner-dark.webp"},title:"他的第二人生",subtitle:{text:["人生苦短，","我要活出双倍精彩！"],hitokoto:{enable:!1,api:"https://v1.hitokoto.cn"},typing_speed:100,backing_speed:80,starting_delay:500,backing_delay:1500,loop:!0,smart_backspace:!0},text_color:{light:"#fff",dark:"#fff"},text_style:{title_size:"2.8rem",subtitle_size:"1.5rem",line_height:1.2},custom_font:{enable:!1,family:null,url:null},social_links:{enable:!1,links:{github:null,instagram:null,zhihu:null,twitter:null,email:null},qrs:null}},plugins:{feed:{enable:!1},aplayer:{enable:!1,type:"fixed",audios:[{name:null,artist:null,url:null,cover:null}]},mermaid:{enable:!1,version:"9.3.0"}},version:"2.6.0",navbar:{auto_hide:!1,color:{left:"#fff",right:"#fff",transparency:35},links:{Home:{path:"/",icon:"fa-regular fa-house"},"文章":{icon:"fa-regular fa-pen-fancy",submenus:{"归档":"/archives","分类":"/categories","标签":"/tags"}},"路牌":{icon:"fa-regular fa-diamond-turn-right",submenus:{"友链":"/links","开往":"https://www.travellings.cn/go.html"}},"我":{icon:"fa-regular fa-user-vneck-hair",submenus:{"时间线":"/timeline","关于":"/about"}},RSS:{path:"/atom.xml",icon:"fa-solid fa-rss"},English:{path:"https://his2nd.life/en",icon:"fa-solid fa-language"}},search:{enable:!0,preload:!0}},page_templates:{friends_column:2,tags_style:"cloud"},home:{sidebar:{enable:!0,position:"left",first_item:"info",announcement:null,links:{"友链":{path:"/links",icon:"fa-regular fa-link"},"开往":{path:"https://www.travellings.cn/go.html",icon:"fa-regular fa-train"},"时间线":{path:"/timeline",icon:"fa-solid fa-hashtag"},"关于":{path:"/about",icon:"fa-regular fa-user-vneck-hair"},RSS:{path:"/atom.xml",icon:"fa-solid fa-rss"},English:{path:"https://his2nd.life/en",icon:"fa-solid fa-language"}}},article_date_format:"auto",categories:{enable:!0,limit:3},tags:{enable:!0,limit:3}},footerStart:"2020/1/14 00:43:11"},window.lang_ago={second:"%s 秒前",minute:"%s 分钟前",hour:"%s 小时前",day:"%s 天前",week:"%s 周前",month:"%s 个月前",year:"%s 年前"},window.data={masonry:!1}</script><link rel="stylesheet" href="/zh-CN/fontawesome/fontawesome.min.css"><link rel="stylesheet" href="/zh-CN/fontawesome/brands.min.css"><link rel="stylesheet" href="/zh-CN/fontawesome/solid.min.css"><link rel="stylesheet" href="/zh-CN/fontawesome/regular.min.css"><link rel="stylesheet" href="/zh-CN/css/collapse.css"><link rel="stylesheet" href="/shared/custom.css"><link rel="me" href="https://m.cmx.im/@Hollis"><meta name="generator" content="Hexo 7.1.1"><meta name="h2l-embedded-meta" content="%7B%22layout%22%3A%22post%22%2C%22title%22%3A%22Unraid%20OS%20%E8%B8%A9%E5%9D%91%E8%AE%B0%E5%BD%95%22%2C%22date%22%3A%222023-05-20%2014%3A12%3A36%22%2C%22updated%22%3A%222024-01-17%2015%3A31%3A10%22%2C%22excerpt%22%3A%22%E4%BA%94%E4%B8%80%E7%9A%84%E6%97%B6%E5%80%99%E6%8A%8A%E5%AE%B6%E4%B8%AD%E8%87%AA%E7%BB%84%E7%9A%84%20NAS%20%E4%BB%8E%20Windows%2010%20%E7%B3%BB%E7%BB%9F%E6%8D%A2%E5%88%B0%E4%BA%86%20Unraid%20OS%EF%BC%8C%E5%9C%A8%E6%AD%A4%E8%AE%B0%E5%BD%95%E4%B8%80%E4%B8%8B%E9%85%8D%E7%BD%AE%E4%B8%8E%E6%B3%A8%E6%84%8F%E4%BA%8B%E9%A1%B9%EF%BC%8C%E4%BB%A5%E4%BE%BF%E4%B9%8B%E5%90%8E%E9%87%8D%E8%A3%85%E6%9C%89%E5%BE%97%E5%8F%82%E8%80%83%E3%80%82%22%2C%22categories%22%3A%5B%7B%22name%22%3A%22%E6%8A%80%E6%9C%AF%E4%B8%8E%E6%8A%80%E8%83%BD%22%2C%22slug%22%3A%22technologies-and-techniques%22%2C%22permalink%22%3A%22https%3A%2F%2Fhis2nd.life%2Fzh-CN%2Fcategories%2Ftechnologies-and-techniques%2F%22%7D%5D%2C%22tags%22%3A%5B%7B%22name%22%3A%22NAS%22%2C%22slug%22%3A%22nas%22%2C%22permalink%22%3A%22https%3A%2F%2Fhis2nd.life%2Fzh-CN%2Ftags%2Fnas%2F%22%7D%2C%7B%22name%22%3A%22Unraid%20OS%22%2C%22slug%22%3A%22unraid-os%22%2C%22permalink%22%3A%22https%3A%2F%2Fhis2nd.life%2Fzh-CN%2Ftags%2Funraid-os%2F%22%7D%2C%7B%22name%22%3A%22GNU%2FLinux%22%2C%22slug%22%3A%22gnu-linux%22%2C%22permalink%22%3A%22https%3A%2F%2Fhis2nd.life%2Fzh-CN%2Ftags%2Fgnu-linux%2F%22%7D%5D%2C%22path%22%3A%22posts%2Fd2b23a8d.html%22%2C%22permalink%22%3A%22https%3A%2F%2Fhis2nd.life%2Fzh-CN%2Fposts%2Fd2b23a8d.html%22%7D"></head><body><noscript id="javascript-alert"><p>您未开启 JavaScript。开启 JavaScript 后才能加载部分内容。</p></noscript><script src="/shared/third-party/macy/macy.min.js"></script><div class="progress-bar-container"><span class="scroll-progress-bar"></span></div><main class="page-container" id="swup"><div class="main-content-container"><div class="main-content-header"><header class="navbar-container"><div class="navbar-content"><div class="left"><a class="logo-image" href="/zh-CN/"><img src="/zh-CN/images/blog-logo.png"> </a><a class="logo-title" href="/zh-CN/">他的第二人生</a></div><div class="right"><div class="desktop"><ul class="navbar-list"><li class="navbar-item"><a href="/zh-CN/"><i class="fa-regular fa-house fa-fw"></i> 首页</a></li><li class="navbar-item"><a class="has-dropdown" href="#" onclick="&quot;return" false;&#34;=""><i class="fa-regular fa-pen-fancy fa-fw"></i> 文章 <i class="fa-solid fa-chevron-down fa-fw"></i></a><ul class="sub-menu"><li><a href="/zh-CN/archives">归档</a></li><li><a href="/zh-CN/categories">分类</a></li><li><a href="/zh-CN/tags">标签</a></li></ul></li><li class="navbar-item"><a class="has-dropdown" href="#" onclick="&quot;return" false;&#34;=""><i class="fa-regular fa-diamond-turn-right fa-fw"></i> 路牌 <i class="fa-solid fa-chevron-down fa-fw"></i></a><ul class="sub-menu"><li><a href="/zh-CN/links">友链</a></li><li><a target="_self" href="https://www.travellings.cn/go.html">开往</a></li></ul></li><li class="navbar-item"><a class="has-dropdown" href="#" onclick="&quot;return" false;&#34;=""><i class="fa-regular fa-user-vneck-hair fa-fw"></i> 我 <i class="fa-solid fa-chevron-down fa-fw"></i></a><ul class="sub-menu"><li><a href="/zh-CN/timeline">时间线</a></li><li><a href="/zh-CN/about">关于</a></li></ul></li><li class="navbar-item"><a href="/zh-CN/atom.xml"><i class="fa-solid fa-rss fa-fw"></i> RSS</a></li><li class="navbar-item"><a href="https://his2nd.life/en"><i class="fa-solid fa-language fa-fw"></i> ENGLISH</a></li><li class="navbar-item search search-popup-trigger"><i class="fa-solid fa-magnifying-glass"></i></li></ul></div><div class="mobile"><div class="icon-item search search-popup-trigger"><i class="fa-solid fa-magnifying-glass"></i></div><div class="icon-item navbar-bar"><div class="navbar-bar-middle"></div></div></div></div></div><div class="navbar-drawer h-screen w-full absolute top-0 left-0 bg-background-color flex flex-col justify-between"><ul class="drawer-navbar-list flex flex-col px-4 justify-center items-start"><li class="drawer-navbar-item text-base my-1.5 flex flex-col w-full"><a class="py-1.5 px-2 flex flex-row items-center justify-between gap-1 hover:!text-primary active:!text-primary text-2xl font-semibold group border-b border-border-color hover:border-primary w-full" href="/zh-CN/"><span>首页 </span><i class="fa-regular fa-house fa-sm fa-fw"></i></a></li><li class="drawer-navbar-item-sub text-base my-1.5 flex flex-col w-full"><div class="py-1.5 px-2 flex flex-row items-center justify-between gap-1 hover:!text-primary active:!text-primary cursor-pointer text-2xl font-semibold group border-b border-border-color hover:border-primary w-full" navbar-data-toggle="submenu-文章"><span>文章 </span><i class="fa-solid fa-chevron-right fa-sm fa-fw transition-all"></i></div><div class="flex-col items-start px-2 py-2 hidden" data-target="submenu-文章"><div class="drawer-navbar-item text-base flex flex-col justify-center items-start hover:underline active:underline hover:underline-offset-1 rounded-3xl"><a class="text-third-text-color text-xl" href="/zh-CN/archives">归档</a></div><div class="drawer-navbar-item text-base flex flex-col justify-center items-start hover:underline active:underline hover:underline-offset-1 rounded-3xl"><a class="text-third-text-color text-xl" href="/zh-CN/categories">分类</a></div><div class="drawer-navbar-item text-base flex flex-col justify-center items-start hover:underline active:underline hover:underline-offset-1 rounded-3xl"><a class="text-third-text-color text-xl" href="/zh-CN/tags">标签</a></div></div></li><li class="drawer-navbar-item-sub text-base my-1.5 flex flex-col w-full"><div class="py-1.5 px-2 flex flex-row items-center justify-between gap-1 hover:!text-primary active:!text-primary cursor-pointer text-2xl font-semibold group border-b border-border-color hover:border-primary w-full" navbar-data-toggle="submenu-路牌"><span>路牌 </span><i class="fa-solid fa-chevron-right fa-sm fa-fw transition-all"></i></div><div class="flex-col items-start px-2 py-2 hidden" data-target="submenu-路牌"><div class="drawer-navbar-item text-base flex flex-col justify-center items-start hover:underline active:underline hover:underline-offset-1 rounded-3xl"><a class="text-third-text-color text-xl" href="/zh-CN/links">友链</a></div><div class="drawer-navbar-item text-base flex flex-col justify-center items-start hover:underline active:underline hover:underline-offset-1 rounded-3xl"><a class="text-third-text-color text-xl" target="_self" href="https://www.travellings.cn/go.html">开往</a></div></div></li><li class="drawer-navbar-item-sub text-base my-1.5 flex flex-col w-full"><div class="py-1.5 px-2 flex flex-row items-center justify-between gap-1 hover:!text-primary active:!text-primary cursor-pointer text-2xl font-semibold group border-b border-border-color hover:border-primary w-full" navbar-data-toggle="submenu-我"><span>我 </span><i class="fa-solid fa-chevron-right fa-sm fa-fw transition-all"></i></div><div class="flex-col items-start px-2 py-2 hidden" data-target="submenu-我"><div class="drawer-navbar-item text-base flex flex-col justify-center items-start hover:underline active:underline hover:underline-offset-1 rounded-3xl"><a class="text-third-text-color text-xl" href="/zh-CN/timeline">时间线</a></div><div class="drawer-navbar-item text-base flex flex-col justify-center items-start hover:underline active:underline hover:underline-offset-1 rounded-3xl"><a class="text-third-text-color text-xl" href="/zh-CN/about">关于</a></div></div></li><li class="drawer-navbar-item text-base my-1.5 flex flex-col w-full"><a class="py-1.5 px-2 flex flex-row items-center justify-between gap-1 hover:!text-primary active:!text-primary text-2xl font-semibold group border-b border-border-color hover:border-primary w-full" href="/zh-CN/atom.xml"><span>RSS </span><i class="fa-solid fa-rss fa-sm fa-fw"></i></a></li><li class="drawer-navbar-item text-base my-1.5 flex flex-col w-full"><a class="py-1.5 px-2 flex flex-row items-center justify-between gap-1 hover:!text-primary active:!text-primary text-2xl font-semibold group border-b border-border-color hover:border-primary w-full" href="https://his2nd.life/en"><span>ENGLISH </span><i class="fa-solid fa-language fa-sm fa-fw"></i></a></li></ul><div class="statistics flex justify-around my-2.5"><a class="item tag-count-item flex flex-col justify-center items-center w-20" href="/zh-CN/tags"><div class="number text-2xl sm:text-xl text-second-text-color font-semibold">28</div><div class="label text-third-text-color text-sm">标签</div></a><a class="item tag-count-item flex flex-col justify-center items-center w-20" href="/zh-CN/categories"><div class="number text-2xl sm:text-xl text-second-text-color font-semibold">7</div><div class="label text-third-text-color text-sm">分类</div></a><a class="item tag-count-item flex flex-col justify-center items-center w-20" href="/zh-CN/archives"><div class="number text-2xl sm:text-xl text-second-text-color font-semibold">82</div><div class="label text-third-text-color text-sm">文章</div></a></div></div><div class="window-mask"></div></header></div><div class="main-content-body"><div class="main-content"><div class="post-page-container flex relative justify-between box-border w-full h-full"><div class="article-content-container"><div class="article-title relative w-full"><div class="w-full flex items-center pt-6 justify-start"><h1 class="article-title-regular text-second-text-color text-4xl md:text-6xl font-bold px-2 sm:px-6 md:px-8 py-3">Unraid OS 踩坑记录</h1></div></div><div class="article-header flex flex-row gap-2 items-center px-2 sm:px-6 md:px-8"><div class="avatar w-[46px] h-[46px] flex-shrink-0 rounded-medium border border-border-color p-[1px]"><img src="/zh-CN/images/avatar.png"></div><div class="info flex flex-col justify-between"><div class="author flex items-center"><span class="name text-default-text-color text-lg font-semibold">Hollis</span></div><div class="meta-info"><div class="article-meta-info"><span class="article-date article-meta-item"><i class="fa-regular fa-pen-fancy"></i>&nbsp; <span class="desktop">2023-05-20 14:12:36</span> <span class="mobile">2023-05-20 14:12:36</span> <span class="hover-info">创建</span> </span><span class="article-date article-meta-item"><i class="fa-regular fa-wrench"></i>&nbsp; <span class="desktop">2024-01-17 15:31:10</span> <span class="mobile">2024-01-17 15:31:10</span> <span class="hover-info">更新</span> </span><span class="article-categories article-meta-item"><i class="fa-regular fa-folders"></i>&nbsp;<ul><li><a href="/zh-CN/categories/technologies-and-techniques/">技术与技能</a>&nbsp;</li></ul></span><span class="article-tags article-meta-item"><i class="fa-regular fa-tags"></i>&nbsp;<ul><li><a href="/zh-CN/tags/nas/">NAS</a>&nbsp;</li><li>| <a href="/zh-CN/tags/unraid-os/">Unraid OS</a>&nbsp;</li><li>| <a href="/zh-CN/tags/gnu-linux/">GNU/Linux</a>&nbsp;</li></ul></span><span class="article-wordcount article-meta-item"><i class="fa-regular fa-typewriter"></i>&nbsp;<span>4.2k 字</span> </span><span class="article-min2read article-meta-item"><i class="fa-regular fa-clock"></i>&nbsp;<span>16 分钟</span> </span><span class="article-pv article-meta-item"><i class="fa-regular fa-eye"></i>&nbsp;<span id="busuanzi_value_page_pv"></span></span></div></div></div></div><div class="article-content markdown-body px-2 sm:px-6 md:px-8 pb-8"><p>五一的时候把家中自组的 NAS 从 Windows 10 系统换到了 Unraid OS，在此记录一下配置与注意事项，以便之后重装有得参考。</p><span id="more"></span><hr><h2 id="Unraid-OS-注意事项">Unraid OS 注意事项</h2><p>  原先在 Windows 下使用的 USB 有线网卡在 Unraid OS 下有点儿毛病，时间长了会使机器失联，而板载网卡在 Windows 下都有毛病，所以我装了闲置的 TP-Link 牌的 PCI-E 网卡，芯片是 <code>RTL8111/8168/8411</code> 三个型号之一，目前用着还正常；Unraid OS 支持的网卡参考<a class="link" target="_blank" rel="noopener external nofollow noreferrer" href="https://wiki.unraid.net/Hardware_Compatibility#Network_Controllers">“Hardware Compatibility” <i class="fa-regular fa-arrow-up-right-from-square fa-sm"></i></a>，据说英特尔的兼容性很好。</p><p>  关机或重启前<strong>手动停止阵列</strong>，停止阵列之前先手动停止所有容器更好，此外，大折腾前先<strong>备份一遍 CA 和虚拟机</strong>，这都是<strong>教训</strong>！Unraid OS 的关机和重启似乎不是那么可靠，有时候是强制的，导致缓存池文件系统报错，<strong>无法修复</strong>，只能恢复备份，<strong>妈了个逼的好几次了</strong>！（也许是我使用 Dynamix System Buttons 导致的？总之还是先手动停止阵列保险一些。）</p><p>  另外，在 <code>go</code> 文件内写入 Docker 镜像加速地址：</p><div class="highlight-container" data-rel="Bash"><figure class="iseeu highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 国内 Docker 镜像加速</span></span><br><span class="line"><span class="built_in">mkdir</span> -p /etc/docker</span><br><span class="line"><span class="built_in">tee</span> /etc/docker/daemon.json &lt;&lt;-<span class="string">'EOF'</span></span><br><span class="line">{</span><br><span class="line"><span class="string">"registry-mirrors"</span>: [<span class="string">"https://dockerproxy.com"</span>, <span class="string">"https://mirror.baidubce.com"</span>, <span class="string">"https://ccr.ccs.tencentyun.com"</span>, <span class="string">"https://hub-mirror.c.163.com"</span>]</span><br><span class="line">}</span><br><span class="line">EOF</span><br></pre></td></tr></tbody></table></figure></div><h3 id="设置">设置</h3><p>  在 <code>设置 &gt; Docker</code> 页面删除镜像前，<strong>先备份 appdata</strong>！</p><ul><li>路由器映射总端口、WireGuard 端口 <s>，IPv6 的 DNS 设为无效地址 <code>2000::1</code>、<code>2000::2</code>，让路由器为 IPv6 使用 IPv4 DNS</s>（不再使用 AdGuardHome）。</li><li>默认休眠延迟 1 小时。</li><li>在 <code>可调式 (md_write_method)</code> 开启重建写入（Turbo Write），见<a class="link" target="_blank" rel="noopener external nofollow noreferrer" href="https://forums.unraid.net/topic/50397-turbo-write/">“Turbo write” <i class="fa-regular fa-arrow-up-right-from-square fa-sm"></i></a>，缺点是写入时阵列内全部磁盘都将唤醒。</li><li>启用 SMB 多通道。</li><li>阿里云 NTP 服务器。</li><li>启用 IPv6。</li><li><s>为 Docker 启用 <code>主机访问自定义网络</code>：</s><ul><li>不再启用 <code>主机访问自定义网络</code>，因为启用后使用 WireGuard，需要在 WireGuard 中关闭 <code>本地服务器使用网络地址转换(NAT)</code>，同时在路由器建立静态路由表，见<a class="link" target="_blank" rel="noopener external nofollow noreferrer" href="https://forums.unraid.net/topic/84226-wireguard-quickstart/">此贴 <i class="fa-regular fa-arrow-up-right-from-square fa-sm"></i></a>。</li></ul></li><li><s>关闭磁盘共享，仅使用用户共享（磁盘共享与用户共享互拷文件，且位于同一磁盘时会出问题，关闭磁盘共享能减少人为犯错可能）：</s><ul><li>总开关开着了，有时候需要使用磁盘共享，就单独给某块磁盘开启共享。</li></ul></li><li>6.12 新增的独占模式保持关闭——虽然独占模式绕过了基于 FUSE 的 SHFS，能提高共享目录读写性能，但 AList 和荒野无灯的 File Browser 还不能识别符号链接形式的目录。</li><li>启用本地系统日志服务器，并且远程系统日志服务器地址填本机地址（192.168 的）。</li><li>WireGuard 设置远程隧道访问。</li><li>各种更新通知设为每周检查一次，但在下方关闭插件与 Docker 更新通知。</li><li>自动奇偶校验每月 7 日 3 点。</li><li>Mover 设为每日 7 点。</li><li>SSD Trim 每周四 2 点。</li><li>……</li></ul><h3 id="阵列与池">阵列与池</h3><p>  阵列使用 XFS，自身不支持静默数据损坏检查，数据由校验盘保护，基于 FUSE 的 SHFS 以目录为单位将文件拆分到阵列内的多块硬盘上，若无校验盘保护，一块硬盘损坏，其他硬盘上的文件仍可读取。</p><p>  池使用 Btrfs，支持静默数据损坏检查，数据由 RAID 保护，文件在池内的分布由 RAID 级别决定，若无 RAID 保护，一块硬盘损坏，其他硬盘上的文件无法读取（RAID 0）或修复后仅可读取部分（single，见<a class="link" target="_blank" rel="noopener external nofollow noreferrer" href="https://serverfault.com/questions/890547/btrfs-single-data-fs-still-striped">“BTRFS single data FS still striped?” <i class="fa-regular fa-arrow-up-right-from-square fa-sm"></i></a>）。</p><p>  Unraid OS 6.12 新增 ZFS 支持，折腾了一番还是换回了 Btrfs。ZFS <a class="link" target="_blank" rel="noopener external nofollow noreferrer" href="https://www.v2ex.com/t/738276">磁盘阵列扩展无法加盘 <i class="fa-regular fa-arrow-up-right-from-square fa-sm"></i></a>，且<a class="link" target="_blank" rel="noopener external nofollow noreferrer" href="https://www.reddit.com/r/zfs/comments/muwr1a/best_practice_for_changing_raid0_pool_to_raidz/">切换 Profile 需要整体重建 <i class="fa-regular fa-arrow-up-right-from-square fa-sm"></i></a>。Btrfs 的 RAID5/6 还不稳定，不建议使用，但至少容易扩展。</p><ul><li>1 TB 硬盘放入阵列。</li><li>4 TB 硬盘作为校验盘。</li><li>SSD 作为 Cache。</li><li>18 TB 硬盘作为 Pool，single，Balance Schedule <s>设为每月 25 日 4 点</s>关闭。</li><li>……</li></ul><h3 id="共享">共享</h3><ul><li>appdata，application data，系统默认，私有共享。</li><li>local_backups，CA 与 VM 备份，存在阵列，私有共享。</li><li>dnml，下载与媒体库，存在 Pool，私有共享。</li><li>large_data，不重要的大型数据，存在 Pool，私有共享。</li><li>large_temp，不重要的大型临时数据，存在 Cache，私有共享。</li><li>syslog，系统日志，首选 Cache，私有共享。</li><li>user_hollis，Hollis 文件，存在阵列，私有共享。</li><li>user_guest，宾客文件，存在阵列，公开共享。</li><li>……</li></ul><h3 id="插件">插件</h3><ul><li>Community Applications，必装。</li><li>已卸载：Unraid Connect，用于远程管理机器，对我来说没啥用。</li><li>Fix Common Problems，问题检测。</li><li>Proxy Editor，快捷编辑代理，让容器镜像更新检查和 CA 安装走代理，需要手动安装，这是<a class="link" target="_blank" rel="noopener external nofollow noreferrer" href="https://forums.unraid.net/topic/132645-proxy-editor-%E6%8F%90%E4%BE%9B%E5%8F%AF%E8%A7%86%E5%8C%96%E9%A1%B5%E9%9D%A2%EF%BC%8C%E6%96%B9%E4%BE%BF%E5%BF%AB%E6%8D%B7%E8%AE%BE%E7%BD%AE%E3%80%81%E5%88%87%E6%8D%A2%E4%BB%A3%E7%90%86/">支持链接 <i class="fa-regular fa-arrow-up-right-from-square fa-sm"></i></a>。</li><li>已卸载：Unassigned Devices 和 Unassigned Devices Plus，挂载未分配给阵列和池的磁盘，我为此插件添加了中文翻译。</li><li>CA Auto Update Applications，自动更新 CA 和容器镜像，我设置的是每周一 2 点更新 CA，5 点更新容器镜像，排除了 Clash、mihomo、DDNS、filebrowser、Transmission、nginxWebUI、code-server、qBittorrent、MoviePilot，均关闭更新通知。</li><li>Backup/Restore Appdata（安装名称：Appdata Backup），定时备份 CA 配置，我设置的是每周二 2 点，备份 Flash，不备份 VM 元数据，VM 由另一个插件备份。</li><li>VM Backup，定时备份虚拟机，每周五 10 点，启用 Zstandard 压缩（恢复时可用 <code>zstd -d</code> 解压），仅开启错误通知：<ul><li>目前这个插件在系统重启后会自动下载一些文件，如果下载不成功，就会变成卸载状态，临时的解决方案见<a class="link" target="_blank" rel="noopener external nofollow noreferrer" href="https://forums.unraid.net/topic/86303-vm-backup-plugin/?do=findComment&amp;comment=1291834">此贴 <i class="fa-regular fa-arrow-up-right-from-square fa-sm"></i></a>，他楼上那个 HeyHollis 就是我，哈哈。</li></ul></li><li>Dynamix File Integrity，定期检查静默数据损坏，每周三 2 点，关闭通知，我为此插件添加了中文翻译。</li><li>Dynamix File Manager，简易文件管理器。</li><li>Dynamix System Autofan，自动控制风扇转速：<ul><li>需要注意的是，系统缺少“ITE IT8613E Super IO Sensors”驱动程序，需要在 <code>go</code> 文件中添加 <code>modprobe it87 force_id=0x8620</code> 才能正常使用此插件，见<a class="link" target="_blank" rel="noopener external nofollow noreferrer" href="https://forums.unraid.net/topic/111683-no-fan-control/">“No fan control?” <i class="fa-regular fa-arrow-up-right-from-square fa-sm"></i></a>。</li><li>此插件只管理系统风扇，我使用利民的风扇集线器来扩展风扇接口，CPU 风扇仍然接在 CPU 风扇接口上，系统风扇接在集线器上。</li><li>预先在 BIOS 中将系统风扇调到 <code>无声</code> 挡（<code>正常</code> 挡太吵了），CPU 风扇使用 <code>正常</code> 挡即可。</li><li>我为此插件添加了中文翻译。</li></ul></li><li>Dynamix System Temperature，显示系统温度：<ul><li>在解决了 Dynamix System Autofan 的问题后，可选 <code>it8620</code> 作为阵列温度显示。</li></ul></li><li>GPU Statistics，在仪表板显示 GPU 信息。</li><li>Intel GPU TOP，上面那个插件依赖这个插件。</li><li>Intel GVT-g，允许向多个虚拟机和容器直通英特尔核显，适用于 5 到 10 代，如果使用 RDP 可能耗尽显存。</li><li>Disable Mitigation Settings，关闭安全缓解措施。</li><li>File Activity，监视文件读写，查找硬盘无法停转的原因时有帮助。</li><li>……</li></ul><h2 id="容器">容器</h2><p>  需要 UPnP、DLNA 的容器必须将网络设为 <code>host</code>。</p><p>  <code>Custom: br0</code> 的容器需启用 <code>主机访问自定义网络</code> 才可被其他网络类型的容器访问。</p><ul><li>xhofe/alist：<ul><li>挂载阿里云盘的根目录时，<code>根目录ID</code> 填 <code>root</code>。</li></ul></li><li>allanpk716/chinesesubfinder：<ul><li>将 <code>/mnt/user/dnml/</code> 映射为 <code>/media/dnml</code>，否则 CSF 会提示在容器内可能因为权限原因无法读取 <code>/media</code> 之外的目录。这项配置也会影响 MP 的 CSF 字幕下载插件的配置，具体见下文。</li></ul></li><li><s>dreamacro/clash-premium，网络设为 <code>host</code>，不支持设置 UID 等：</s><ul><li>Clash 核心删库后改为 metacubex/mihomo:Alpha，网络设为 <code>host</code>，不支持设置 UID 等。</li><li><code>proxy-providers</code> 由自建 <a class="link" target="_blank" rel="noopener external nofollow noreferrer" href="https://github.com/qier222/proxy-provider-converter">Proxy Provider Converter <i class="fa-regular fa-arrow-up-right-from-square fa-sm"></i></a> 生成。</li><li><code>rule-providers</code> 采用 <a class="link" target="_blank" rel="noopener external nofollow noreferrer" href="https://github.com/Loyalsoldier/clash-rules">clash-rules <i class="fa-regular fa-arrow-up-right-from-square fa-sm"></i></a>（其中 Google 服务调整为使用代理），由自建 <a class="link" target="_blank" rel="noopener external nofollow noreferrer" href="https://github.com/hunshcn/gh-proxy">gh-proxy <i class="fa-regular fa-arrow-up-right-from-square fa-sm"></i></a> 加速。</li></ul></li><li>linuxserver/code-server，<code>DOCKER_MODS</code> 设为 <code>linuxserver/mods:code-server-nodejs</code>，<code>NODEJS_MOD_VERSION</code> 设为 <code>18</code>，（暂时不要用 Node.js 20 的 Mod，有 bug，会导致使用 Redefine 主题时生成出错。）<code>PROXY_DOMAIN</code> 设为 <s><code>{{port}}.{{host}}</code></s> <code>cs.nas.&lt;域名&gt;:&lt;端口&gt;</code>，不应设置 <code>UMASK</code> 否则 npm 等会报权限不安全。运营商似乎封锁了 22 端口，导致我没办法 push 到 GitHub，所以在 <code>.ssh</code> 目录下新建配置文件，写入主机配置，见<a class="link" target="_blank" rel="noopener external nofollow noreferrer" href="https://zhuanlan.zhihu.com/p/521340971">此文章 <i class="fa-regular fa-arrow-up-right-from-square fa-sm"></i></a>。</li><li>library/couchdb，额外参数 <code>--user 99</code>，不支持设置 PID 和 UMASK。</li><li>newfuture/ddns，不支持设置 UID 等。</li><li>80x86/filebrowser:2.10.3-amd64，<code>/mnt/user/</code> 映射为 <code>/myfiles/user_shares</code>（注意，<code>/myfiles</code> 部分是必不可少的，否则解压文件时会报“文件不存在”的错误），<code>/mnt/user/large_temp/appdata/filebrowser/thumbnail_cache/</code> 映射为 <code>/thumbnail_cache</code>，添加核显设备 <code>/dev/dri/renderD128</code>：<ul><li>admin 的目录范围设置为 <code>./user_shares</code>。</li><li>Hollis 的目录范围设置为 <code>./user_shares/user_hollis</code>。</li></ul></li><li>iyuucn/iyuuplus，不支持设置 UID 等。</li><li>heyhollis/jellyfin，基于 nyanmisaka/jellyfin，支持设定 UID、PID、UMASK 等，需开启特权以使用硬解加速：<ul><li>除了常规的配置路径映射外，还做以下映射：<ul><li><code>/mnt/user/large_temp/appdata/Jellyfin/cache/</code> 映射为 <code>/jellyfin_cache</code>，作为缓存路径。</li><li><code>/mnt/user/large_temp/appdata/Jellyfin/transcodes/</code> 映射为 <code>/jellyfin_transcodes</code>，作为转码路径。</li><li><code>/mnt/user/large_data/appdata/Jellyfin/metadata/</code> 映射为 <code>/jellyfin_metadata</code>，作为元数据路径，元数据存在 large_data 而非 large_temp。</li></ul></li><li>在我的硬件下需关闭 AV1 硬解和低电压模式硬件编码器。</li></ul></li><li>ich777/krusader。</li><li>jxxghp/moviepilot：<ul><li>详细配置在环境变量配置文件里，这里不赘述。</li><li>设置了多个媒体库路径后，如果开启了自动转移，在下载完成时，MP 会根据下载的文件的路径查找对应的媒体库路径。大概是查找与下载的文件的路径具有最大前缀的媒体库路径，如果查不到，就选择第一个满足空间要求的，具体见 <a class="link" target="_blank" rel="noopener external nofollow noreferrer" href="https://github.com/jxxghp/MoviePilot/blob/main/app/modules/filetransfer/__init__.py#L628">get_target_path 函数 <i class="fa-regular fa-arrow-up-right-from-square fa-sm"></i></a>。在我的案例中，媒体库路径有 <code>/dnml/media_lib</code> 和 <code>/dnml/family_media_lib</code>，而下载目录是 <code>/dnml/downloads</code>，因此总是选择 <code>/dnml/media_lib</code> 作为自动转移的媒体库路径。转移到 <code>/dnml/family_media_lib</code> 则需要稍后手动整理。如果将来能有一个能自定义下载位置的插件就好了，就可以配合目录监控功能指定不同下载位置的文件转到不同媒体库。</li><li>CSF 字幕下载插件的“本地路径”指的是 MP 内的路径，“远程路径”指的是 CSF 内的路径；因此在我的案例中，前者填 <code>/dnml</code>，后者填 <code>/media/dnml</code>。</li></ul></li><li>cym1102/nginxwebui，网络设为 <code>host</code>，不支持设置 UID 等，开启特权，端口通过 <code>BOOT_OPTIONS</code> 指定：<ul><li>具体配置见下文。</li></ul></li><li>linuxserver/qbittorrent，网络设为 <code>host</code>。</li><li>linuxserver/transmission:version-3.00-r8，网络设为 <code>host</code>。</li><li>louislam/uptime-kuma，不支持设置 UID 等：<ul><li>设置里的 <code>站点主 URL</code> 最后不要加斜杠，它拼接的时候自动加。</li><li>Unraid webGui 的 Url 应在最后加上 <code>/login</code>。</li><li>Transmission 可用 HTTP 基础身份验证，有效状态码 <code>200-299</code>。</li><li>Clash 不能用 HTTP 基础身份验证，有效状态码在 <code>200-299</code> 的基础上还需添加 <code>401</code>。</li></ul></li><li><s>linuxserver/fail2ban，网络设为 <code>host</code>，主机日志路径映射只读，额外参数 <code>--cap-add=NET_ADMIN --cap-add=NET_RAW</code> 允许修改防火墙：</s><ul><li><s>自定义配置文件应该以 <code>.local</code> 结尾，见<a class="link" target="_blank" rel="noopener external nofollow noreferrer" href="https://github.com/linuxserver/fail2ban-confs">“Configuration README” <i class="fa-regular fa-arrow-up-right-from-square fa-sm"></i></a>;</s></li><li><s>我装这个是因为有王八犊子 SSH 爆破，刷了好多日志，估计是映射的端口被扫出来了吧，现在我把映射关了；</s></li><li><s>Unraid webGui 自带多次尝试失败暂时封禁的功能，所以不用在 fail2ban 里配置：</s><ul><li><s>我使用 nginx 反向代理 Unraid webGui，然而 Unraid webGui 似乎不会读取 <code>X-Real-IP</code> 标头，如果某一 IP 远程登录多次失败，会导致所有远程 IP 暂时无法登录。</s></li></ul></li><li><s>设置增量封禁，忽略局域网地址。</s></li><li>不再使用，因为关闭了端口映射。</li></ul></li><li>linuxserver/duplicati，UID、PID 设为 <code>0</code>，不然无法备份与恢复 <code>/boot</code>：<ul><li>分块大小设为 2 GB。</li><li>在 large_temp 上映射临时路径 <code>/temp_dir</code>，然后去高级选项保存，否则备份大文件时可能占满容器空间。</li><li><s>Flash（/boot）备份，每周二 5 点</s> 现在随 CA 一同由 CA Auto Update Applications 备份。</li><li>CA 备份上云，每周二 5 点，此策略仅为本地与云端备份同步，云端保留一份备份即可。</li><li>VM 备份上云，每周五 13 点，此策略仅为本地与云端备份同步，云端保留一份备份即可。</li><li>user_hollis 备份，每周二 5 点 30。</li><li>user_guest 备份，每周二 6 点。</li></ul></li><li>easychen/cookiecloud，不支持也不用设置 UID 等。</li><li><s>adguard/adguardhome，因 53 端口冲突，需网络设为 <code>custom: br0</code>，固定 IP 地址 <code>192.168.31.2</code>，不支持设置 UID 等：</s><ul><li><s>IPv6 地址是不固定的，没法将 IPv6 的 DNS 设为 AdGuard Home 的地址，所以按照前文所述，将 IPv6 的 DNS 设为无效地址，让路由器为 IPv6 使用 IPv4 DNS。</s></li><li>我觉得如果我不需要通过 WireGuard 访问 AdGuard Home，就不需要关闭 <code>本地服务器使用网络地址转换(NAT)</code>，静态路由表也不是必须的，但实际上我只要开了 <code>主机访问自定义网络</code>，WireGuard 就报废，所以等我解决了 WireGuard 要求的静态路由表的设置再使用 AdGuard Home。</li></ul></li><li>whyour/qinglong，不支持设置 UID 等。</li><li>……</li></ul><h2 id="虚拟机">虚拟机</h2><ul><li>Windows 10：<ul><li>机器：<code>Q35-7.1</code>。</li><li>BIOS：<code>SeaBIOS</code>，在我的情况中只有这个好使。</li><li>USB 控制器：<code>3.0 (nec XHCI)</code>。</li><li>虚拟磁盘总线：<code>VirtIO</code>。</li><li>Unraid 共享模式：<code>VirtIOFS</code>，<code>Manual</code>，<code>/mnt/user/</code>，<code>user_shares</code>。</li><li>显卡：<code>虚拟</code>，通过 Intel GVT-g 分配核显，但在这里选虚拟。<ul><li>需要注意的是，若开启 Intel GVT-g，使用 RDP 可能耗尽显存使虚拟机和 Unraid webGui 失去响应，但我使用 ToDesk 遇到了同样的情况。</li></ul></li><li>虚拟控制台视频驱动：<code>QXL (best)</code>。</li><li>网络资源：<code>br0</code>。</li><li>网络模式：<code>virtio-net</code>。</li><li>XML 视图下在 <code>&lt;/devices&gt;</code> 前插入 <code>&lt;sound model='ich6'/&gt;</code> 以启用声卡，每次编辑虚拟机后都需要重新插入，在 ToDesk 中记得开启被控电脑声音。</li><li>安装操作系统时需安装 VirtIO 驱动程序，暂时只装 Balloon、NetKVM、vioserial、viostor，guest 工具也不装，装多了可能出问题，比如鼠标指针丢失。</li><li>关闭一些功能，见 <a class="link" target="_blank" rel="noopener external nofollow noreferrer" href="https://docs.unraid.net/unraid-os/manual/vm-support/">VM Support <i class="fa-regular fa-arrow-up-right-from-square fa-sm"></i></a>。</li><li>挂载 Unraid 共享，这样大部分软件可以直接写入 Unraid 共享，并且管理文件也更加方便，但使用 Link Shell Extension 制作硬链接还需通过 SMB：<ul><li>运行 VirtIO 驱动镜像里的 <code>virtio-win-gt-x64.msi</code>，这次可以全部安装，然后将 <code>VirtIO-FS Service</code> 服务设为自动启动，安装 <a class="link" target="_blank" rel="noopener external nofollow noreferrer" href="https://winfsp.dev/rel/">WinFsp <i class="fa-regular fa-arrow-up-right-from-square fa-sm"></i></a>。</li></ul></li></ul></li><li>Fedora，配置基本同上，Unraid 共享模式改为 <code>9p</code>；BIOS 用 SeaBIOS 就可以了，这样的虚拟机恢复备份比较容易，不需要手动恢复选 OVMF 后多出来的文件。<ul><li>向 <code>/etc/fstab</code> 写入 <code>user_shares /user_shares 9p trans=virtio,version=9p2000.L,_netdev,rw 0 0</code> 自动挂载 Unraid 共享。</li></ul></li></ul><h2 id="反向代理（通过-nginxWebUI-设置）">反向代理（通过 nginxWebUI 设置）</h2><p>  代理目标末尾通常不加 <code>/</code>，如 <code>http://192.168.xx.xx:pppp</code>，加 <code>/</code> 会导致 Jellyfin 的 WebSocket 出现问题。</p><h3 id="模板参数">模板参数</h3><ul><li>重定向到 Uptime Kuma 状态页：<code>return</code>：<code>302 https://status.&lt;域名&gt;:&lt;端口&gt;/</code>。</li><li>设置超时：<ul><li><code>proxy_read_timeout</code>：<code>24h</code>。</li><li><code>proxy_send_timeout</code>：<code>24h</code>。</li><li><code>proxy_connect_timeout</code>：<code>24h</code>。</li></ul></li><li>关闭缓冲区：<code>proxy_buffering</code>：<code>off</code>。</li><li>设置最大请求体大小：<code>client_max_body_size</code>：<code>10g</code>。</li><li>返回 404：<code>return</code>：<code>404</code>。</li></ul><h3 id="设置-2">设置</h3><ul><li>证书：<ul><li><code>*.cs.nas.&lt;域名&gt;</code>，用于 code-server 端口代理。</li><li><code>nas.&lt;域名&gt;</code>。</li><li><code>*.nas.&lt;域名&gt;</code>。</li></ul></li><li>开启 HTTP/2，TLS 1.2、1.3，设置 Host 参数为 <code>$host</code>，额外参数一律在 location 处设置。</li><li><code>cdb.nas.&lt;域名&gt;</code>，CouchDB，无特殊设置。</li><li><code>iyuu.nas.&lt;域名&gt;</code>，IYUUPlus，无特殊设置。</li><li><code>nginx.nas.&lt;域名&gt;</code>，nginxWebUI，无特殊设置。</li><li><code>dupl.nas.&lt;域名&gt;</code>，Duplicati，无特殊设置。</li><li><code>cc.nas.&lt;域名&gt;</code>，CookieCloud，无特殊设置。</li><li><code>adg.nas.&lt;域名&gt;</code>，AdGuard Home，无特殊设置。</li><li><code>ma.nas.&lt;域名&gt;</code>，MYZXKSAssistant，无特殊设置，已禁用。</li><li><code>*.cs.nas.&lt;域名&gt;</code>，code-server 端口代理，启用 WebSocket。</li><li><code>clash.nas.&lt;域名&gt;</code>，Clash（mihomo），启用 WebSocket。</li><li><code>status.nas.&lt;域名&gt;</code>，Uptime Kuma，启用 WebSocket。</li><li><code>csf.nas.&lt;域名&gt;</code>，ChineseSubFinder，启用 WebSocket。</li><li><code>ql.nas.&lt;域名&gt;</code>，青龙面板，启用 WebSocket。</li><li><code>fb.nas.&lt;域名&gt;</code>，filebrowser，启用 WebSocket，Host 参数：<code>$host:$server_port</code>，设置最大请求体大小，设置超时。</li><li><code>cs.nas.&lt;域名&gt;</code>，code-server，启用 WebSocket，<code>proxy_set_header</code>：<code>Accept-Encoding gzip</code>。</li><li><code>tr.nas.&lt;域名&gt;</code>，Transmission，设置最大请求体大小。</li><li><code>qb.nas.&lt;域名&gt;</code>，qBittorrent，设置最大请求体大小。</li><li><code>alist.nas.&lt;域名&gt;</code>，AList，设置最大请求体大小，设置超时，<a class="link" target="_blank" rel="noopener external nofollow noreferrer" href="https://github.com/alist-org/alist/discussions/3302#discussioncomment-6368900">Host 参数：$http_host <i class="fa-regular fa-arrow-up-right-from-square fa-sm"></i></a>。</li><li><code>jlf.nas.&lt;域名&gt;</code>，Jellyfin：<ul><li><code>/</code> 设置最大请求体大小，关闭缓冲区。</li><li><code>/socket</code> 启用 WebSocket。</li></ul></li><li><code>nas.&lt;域名&gt;</code>，自定义 location，重定向到 Uptime Kuma 状态页。</li><li><code>*.nas.&lt;域名&gt;</code>，未匹配的子域名，自定义 location，重定向到 Uptime Kuma 状态页。</li><li><code>kr.nas.&lt;域名&gt;</code>，Krusader：<ul><li><code>= /</code> 无特殊设置。</li><li><code>/</code> 启用 WebSocket。</li><li><code>/websockify</code> 启用 WebSocket，设置超时，关闭缓冲区。</li></ul></li><li><code>unraid.nas.&lt;域名&gt;</code>，Unraid webGui，启用 WebSocket，Host 参数：<code>$host:$server_port</code>，设置最大请求体大小，设置超时。</li><li><code>mp.nas.&lt;域名&gt;</code>，MediaPilot，Host 参数：<code>$host:$server_port</code>。</li><li>……</li></ul><hr><p>  未完待续……？</p></div><div class="post-copyright-info w-full my-8 px-2 sm:px-6 md:px-8"><div class="article-copyright-info-container"><ul><li><strong>标题:</strong> Unraid OS 踩坑记录</li><li><strong>作者:</strong> Hollis</li><li><strong>创建于 :</strong> 2023-05-20 14:12:36</li><li><strong>更新于 :</strong> 2024-01-17 15:31:10</li><li><strong>链接:</strong> https://his2nd.life/zh-CN/posts/d2b23a8d.html</li><li><strong>版权声明: </strong>本文章采用 <a class="license" target="_blank" rel="noopener external nofollow noreferrer" href="https://creativecommons.org/licenses/by-nc-sa/4.0">CC BY-NC-SA 4.0</a> 进行许可。</li></ul></div></div><ul class="post-tags-box text-lg mt-1.5 flex-wrap justify-center flex md:hidden"><li class="tag-item mx-0.5"><a href="/zh-CN/tags/nas/">#NAS</a>&nbsp;</li><li class="tag-item mx-0.5"><a href="/zh-CN/tags/unraid-os/">#Unraid OS</a>&nbsp;</li><li class="tag-item mx-0.5"><a href="/zh-CN/tags/gnu-linux/">#GNU/Linux</a>&nbsp;</li></ul><div class="article-nav my-8 flex justify-between items-center px-2 sm:px-6 md:px-8"><div class="article-prev border-border-color shadow-redefine-flat shadow-shadow-color-2 rounded-medium px-4 py-2 hover:shadow-redefine-flat-hover hover:shadow-shadow-color-2"><a class="prev" rel="prev" href="/zh-CN/posts/89ce6dc2.html"><span class="left arrow-icon flex justify-center items-center"><i class="fa-solid fa-chevron-left"></i> </span><span class="title flex justify-center items-center"><span class="post-nav-title-item">我大部分的自卑与自负都来源于肥胖</span> <span class="post-nav-item">上一篇</span></span></a></div><div class="article-next border-border-color shadow-redefine-flat shadow-shadow-color-2 rounded-medium px-4 py-2 hover:shadow-redefine-flat-hover hover:shadow-shadow-color-2"><a class="next" rel="next" href="/zh-CN/posts/7de35aff.html"><span class="title flex justify-center items-center"><span class="post-nav-title-item">傍晚的江畔</span> <span class="post-nav-item">下一篇</span> </span><span class="right arrow-icon flex justify-center items-center"><i class="fa-solid fa-chevron-right"></i></span></a></div></div><div class="comment-container px-2 sm:px-6 md:px-8 pb-8"><div class="comments-container mt-10 w-full"><div id="comment-anchor" class="w-full h-2.5"></div><div class="comment-area-title w-full my-1.5 md:my-2.5 text-xl md:text-3xl font-bold">评论</div><div class="twikoo-container"><script src="https://cdnjs.onmicrosoft.cn/ajax/libs/twikoo/1.6.29/twikoo.all.min.js"></script><div id="twikoo-comment"></div><script>function loadTwikoo(){twikoo.init({el:"#twikoo-comment",envId:"https://twikoo.his2nd.life"})}{const a=setTimeout(()=>{loadTwikoo(),clearTimeout(a)},1e3)}</script></div></div></div></div><div class="toc-content-container"><div class="post-toc-wrap"><div class="post-toc"><div class="toc-title">此页目录</div><div class="page-title">Unraid OS 踩坑记录</div><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#Unraid-OS-%E6%B3%A8%E6%84%8F%E4%BA%8B%E9%A1%B9"><span class="nav-text">Unraid OS 注意事项</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%AE%BE%E7%BD%AE"><span class="nav-text">设置</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E9%98%B5%E5%88%97%E4%B8%8E%E6%B1%A0"><span class="nav-text">阵列与池</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%85%B1%E4%BA%AB"><span class="nav-text">共享</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%8F%92%E4%BB%B6"><span class="nav-text">插件</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%AE%B9%E5%99%A8"><span class="nav-text">容器</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E8%99%9A%E6%8B%9F%E6%9C%BA"><span class="nav-text">虚拟机</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%8F%8D%E5%90%91%E4%BB%A3%E7%90%86%EF%BC%88%E9%80%9A%E8%BF%87-nginxWebUI-%E8%AE%BE%E7%BD%AE%EF%BC%89"><span class="nav-text">反向代理（通过 nginxWebUI 设置）</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%A8%A1%E6%9D%BF%E5%8F%82%E6%95%B0"><span class="nav-text">模板参数</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%AE%BE%E7%BD%AE-2"><span class="nav-text">设置</span></a></li></ol></li></ol></div></div></div></div></div></div><div class="main-content-footer"><footer class="footer mt-5 py-5 h-auto text-base text-third-text-color relative border-t-2 border-t-border-color"><div class="info-container py-3 text-center"><div class="text-center">© <span>2020</span> - 2024&nbsp;&nbsp;<i class="fa-solid fa-heart fa-beat" style="--fa-animation-duration:0.5s;color:#f54545"></i>&nbsp;&nbsp;<a href="/zh-CN/">Hollis</a></div><div class="relative text-center lg:absolute lg:right-[20px] lg:top-1/2 lg:-translate-y-1/2 lg:text-right"><span id="busuanzi_container_site_pv" class="lg:!block"><span class="text-sm">总访问量</span> <span id="busuanzi_value_site_pv"></span></span></div><div class="relative text-center lg:absolute lg:left-[20px] lg:top-1/2 lg:-translate-y-1/2 lg:text-left"><span class="lg:block text-sm">由 <!--?xml version="1.0" encoding="utf-8"?--><svg class="relative top-[2px] inline-block align-baseline" version="1.1" id="圖層_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="1rem" height="1rem" viewBox="0 0 512 512" enable-background="new 0 0 512 512" xml:space="preserve"><path fill="#0E83CD" d="M256.4,25.8l-200,115.5L56,371.5l199.6,114.7l200-115.5l0.4-230.2L256.4,25.8z M349,354.6l-18.4,10.7l-18.6-11V275H200v79.6l-18.4,10.7l-18.6-11v-197l18.5-10.6l18.5,10.8V237h112v-79.6l18.5-10.6l18.5,10.8V354.6z"></path></svg><a target="_blank" class="text-base" href="https://hexo.io" rel="external nofollow noreferrer">Hexo</a> 驱动</span> <span class="text-sm lg:block">主题&nbsp;<a class="text-base" target="_blank" href="https://github.com/EvanNotFound/hexo-theme-redefine" rel="external nofollow noreferrer">Redefine v2.6.0</a></span></div><div class="icp-info my-1"><a target="_blank" rel="nofollow" href="https://icp.gov.moe/?keyword=20230041">萌ICP备20230041号</a></div><div>博客已运行 <span class="odometer" id="runtime_days"></span> 天 <span class="odometer" id="runtime_hours"></span> 小时 <span class="odometer" id="runtime_minutes"></span> 分钟 <span class="odometer" id="runtime_seconds"></span> 秒</div><script>try{function odometer_init(){document.querySelectorAll(".odometer").forEach(e=>{new Odometer({el:e,format:"( ddd).dd",duration:200})})}odometer_init()}catch(e){}</script></div></footer></div></div><div class="post-tools"><div class="post-tools-container"><ul class="article-tools-list"><li class="right-bottom-tools page-aside-toggle"><i class="fa-regular fa-outdent"></i></li><li class="go-comment"><i class="fa-regular fa-comments"></i></li></ul></div></div><div class="right-side-tools-container"><div class="side-tools-container"><ul class="hidden-tools-list"><li class="right-bottom-tools tool-font-adjust-plus flex justify-center items-center"><i class="fa-regular fa-magnifying-glass-plus"></i></li><li class="right-bottom-tools tool-font-adjust-minus flex justify-center items-center"><i class="fa-regular fa-magnifying-glass-minus"></i></li><li class="right-bottom-tools tool-dark-light-toggle flex justify-center items-center"><i class="fa-regular fa-moon"></i></li><li class="right-bottom-tools tool-scroll-to-bottom flex justify-center items-center"><i class="fa-regular fa-arrow-down"></i></li></ul><ul class="visible-tools-list"><li class="right-bottom-tools toggle-tools-list flex justify-center items-center"><i class="fa-regular fa-cog fa-spin"></i></li><li class="right-bottom-tools tool-scroll-to-top flex justify-center items-center"><i class="arrow-up fas fa-arrow-up"></i> <span class="percent"></span></li></ul></div></div><div class="image-viewer-container"><img src=""></div><div class="search-pop-overlay"><div class="popup search-popup"><div class="search-header"><span class="search-input-field-pre"><i class="fa-solid fa-keyboard"></i></span><div class="search-input-container"><input autocomplete="off" autocorrect="off" autocapitalize="off" placeholder="搜索..." spellcheck="false" type="search" class="search-input"></div><span class="popup-btn-close"><i class="fa-solid fa-times"></i></span></div><div id="search-result"><div id="no-result"><i class="fa-solid fa-spinner fa-spin-pulse fa-5x fa-fw"></i></div></div></div></div></main><script src="/zh-CN/js/tools/imageViewer.js" type="module"></script><script src="/zh-CN/js/utils.js" type="module"></script><script src="/zh-CN/js/main.js" type="module"></script><script src="/zh-CN/js/layouts/navbarShrink.js" type="module"></script><script src="/zh-CN/js/tools/scrollTopBottom.js" type="module"></script><script src="/zh-CN/js/tools/lightDarkSwitch.js" type="module"></script><script src="/zh-CN/js/layouts/categoryList.js" type="module"></script><script src="/zh-CN/js/tools/localSearch.js" type="module"></script><script src="/zh-CN/js/tools/codeBlock.js" type="module"></script><script src="/zh-CN/js/tools/runtime.js"></script><script src="/zh-CN/js/libs/odometer.min.js"></script><link rel="stylesheet" href="/zh-CN/assets/odometer-theme-minimal.css"><script src="/zh-CN/js/libs/Typed.min.js"></script><script src="/zh-CN/js/plugins/typed.js" type="module"></script><script src="/zh-CN/js/libs/anime.min.js"></script><div class="post-scripts"><script src="/zh-CN/js/tools/tocToggle.js" type="module"></script><script src="/zh-CN/js/layouts/toc.js" type="module"></script><script src="/zh-CN/js/plugins/tabs.js" type="module"></script></div><script src="/zh-CN/js/collapse.js"></script><script src="/shared/dependencies/jquery/jquery.min.js"></script><script src="/shared/dependencies/lodash/lodash.custom.min.js"></script><script src="/shared/dependencies/crypto-js/crypto-js.min.js"></script><script src="/shared/dependencies/vconsole/vconsole.min.js"></script><script src="/shared/dependencies/layui/layui.js"></script><script src="/shared/third-party/mastodon-timeline/mastodon-timeline.js"></script><script src="/shared/runtime-site-mod.js"></script><script src="/shared/third-party/goatcounter/count.js" data-goatcounter="https://gc.his2nd.life/count"></script></body></html>
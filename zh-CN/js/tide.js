"use strict";window.tideGlobal={programmaticScroll:!1,setProgrammaticScroll:function(){this.programmaticScroll=!0,this._resetProgrammaticScrollDebounced||(this._resetProgrammaticScrollDebounced=window.tideClientUtils.debounce((()=>{this.programmaticScroll=!1}),5e3)),this._resetProgrammaticScrollDebounced()}},window.tideClientCtx={};const clientCtxElement=document.querySelector('meta[name="tide-client-ctx"]');function getPageLang(){return document.documentElement.getAttribute("lang")}function isPageRtl(){return"rtl"===document.documentElement.getAttribute("dir")}clientCtxElement&&(window.tideClientCtx=JSON.parse(decodeURIComponent(clientCtxElement.getAttribute("content")))),document.addEventListener("error",(function(e){"img"===e.target.tagName.toLowerCase()&&(e.target.className+=" tide-broken-img")}),!0);class TideSettings{static#e="tide_settings";static version=1;static#t="SYSTEM";static get colorScheme(){return this.#t}static set colorScheme(e){"SYSTEM"!==e&&"LIGHT"!==e&&"DARK"!==e||(this.#t=e,this.#n())}static#d(){let e=localStorage.getItem(this.#e)??"{}";try{e=JSON.parse(e)}catch(t){e={}}window.tideClientUtils.isPlainObject(e)||(e={}),e=this.#o(e),this.colorScheme=e.colorScheme}static#o(e){return(!(e=window.tideClientUtils.deepClone(e)).version||e.version<1)&&(e.colorScheme="SYSTEM",e.version=1),e}static#n(){const e={version:this.version,colorScheme:this.colorScheme};localStorage.setItem(this.#e,JSON.stringify(e))}static{this.#d()}}function systemColorSchemeChanged(e){document.documentElement.dispatchEvent(new CustomEvent("colorschemechange",{detail:{newValue:e,alignedWithSystem:!0}}))}document.documentElement.addEventListener("colorschemechange",(function(e){e.detail.alignedWithSystem?(TideSettings.colorScheme="SYSTEM",delete document.documentElement.dataset.colorScheme):"dark"===e.detail.newValue?(TideSettings.colorScheme="DARK",document.documentElement.dataset.colorScheme="dark"):(TideSettings.colorScheme="LIGHT",document.documentElement.dataset.colorScheme="light")}));const darkModePreference=window.matchMedia("(prefers-color-scheme: dark)");darkModePreference.addEventListener("change",(e=>e.matches&&systemColorSchemeChanged("dark")));const lightModePreference=window.matchMedia("(prefers-color-scheme: light)");function handleForcedColorsChange(e){document.documentElement.dispatchEvent(new CustomEvent("forcedcolorschange",{detail:{active:e}}))}lightModePreference.addEventListener("change",(e=>e.matches&&systemColorSchemeChanged("light"))),"LIGHT"===TideSettings.colorScheme?document.documentElement.dispatchEvent(new CustomEvent("colorschemechange",{detail:{newValue:"light",alignedWithSystem:!1}})):"DARK"===TideSettings.colorScheme&&document.documentElement.dispatchEvent(new CustomEvent("colorschemechange",{detail:{newValue:"dark",alignedWithSystem:!1}})),document.documentElement.addEventListener("forcedcolorschange",(function(e){e.detail.active&&(TideSettings.colorScheme="SYSTEM",delete document.documentElement.dataset.colorScheme,darkModePreference.matches?document.documentElement.dispatchEvent(new CustomEvent("colorschemechange",{detail:{newValue:"dark",alignedWithSystem:!0}})):lightModePreference.matches&&document.documentElement.dispatchEvent(new CustomEvent("colorschemechange",{detail:{newValue:"light",alignedWithSystem:!0}})))}));const forcedColorsQuery=window.matchMedia("(forced-colors: active)");function domContentLoadedHandler(e){const t=document.getElementById("tide-root"),n=[...document.querySelectorAll("#tide-sidebar a")],d=document.getElementById("tide-main-content"),o=[...document.getElementsByClassName("tide-btn-unmask-image")],i=document.getElementById("tide-btn-nav"),a=document.getElementById("tide-btn-search"),c=document.getElementById("tide-dialog-search"),l=document.getElementById("tide-btn-color-scheme"),s=document.getElementById("tide-btn-settings"),r=document.getElementById("tide-floating-widgets"),m=document.getElementById("tide-btn-top"),h=document.getElementById("tide-btn-toc"),g=document.getElementById("tide-dialog-toc"),u=document.getElementById("tide-btn-langs"),E=document.getElementById("tide-dialog-lang-picker"),w=document.getElementById("tide-btn-interactions"),S=document.getElementById("tide-btn-extra-widgets");function p(e){if(e){t.dataset.sidebarExpanded="",i.setAttribute("aria-expanded","true");for(const e of n)e.removeAttribute("tabindex")}else{delete t.dataset.sidebarExpanded,i.setAttribute("aria-expanded","false");for(const e of n)e.setAttribute("tabindex","-1")}}function y(){window.matchMedia("(orientation: landscape) and (min-width: 1280px)").matches?p(!0):p(!1)}function v(){window.matchMedia("(min-height: 768px)").matches&&(delete r.dataset.extraWidgetsExpanded,delete r.dataset.extraWidgetsCollapsed)}for(const e of o)e.addEventListener("click",(function(e){e.target.parentElement.parentElement.nextElementSibling.dataset.unmasked=""})),e.addEventListener("keydown",(function(e){if("Space"===e.code){e.preventDefault();e.target.parentElement.parentElement.nextElementSibling.dataset.unmasked=""}}));if(window.addEventListener("resize",window.tideClientUtils.debounce((()=>{y(),v()}))),y(),v(),i.addEventListener("click",(function(e){""===t.dataset.sidebarExpanded?p(!1):p(!0)})),a&&a.addEventListener("click",(()=>{c.showModal()})),l.addEventListener("click",(function(e){let t;"light"===document.documentElement.dataset.colorScheme?t="LIGHT":"dark"===document.documentElement.dataset.colorScheme&&(t="DARK"),t||(t=darkModePreference.matches?"DARK":"LIGHT"),"LIGHT"===t?darkModePreference.matches?document.documentElement.dispatchEvent(new CustomEvent("colorschemechange",{detail:{newValue:"dark",alignedWithSystem:!0}})):document.documentElement.dispatchEvent(new CustomEvent("colorschemechange",{detail:{newValue:"dark",alignedWithSystem:!1}})):"DARK"===t&&(lightModePreference.matches?document.documentElement.dispatchEvent(new CustomEvent("colorschemechange",{detail:{newValue:"light",alignedWithSystem:!0}})):document.documentElement.dispatchEvent(new CustomEvent("colorschemechange",{detail:{newValue:"light",alignedWithSystem:!1}})))})),s.addEventListener("click",(function(e){const t=document.getElementsByTagName("html")[0];isPageRtl()?t.setAttribute("dir","ltr"):t.setAttribute("dir","rtl")})),m.addEventListener("click",(()=>{window.tideGlobal.setProgrammaticScroll(),window.history.replaceState(null,"",window.location.pathname+window.location.search),window.tideSetActiveTocLink(null),d.scrollTo({top:0})})),h){const e=[...document.getElementsByClassName("tide-toc-link")];if(0===e.length)h.style.display="none";else{const t=e.map((e=>{const t=e.getAttribute("href").slice(1),n=decodeURIComponent(t);return document.getElementById(n)})),n=()=>{let e=t.findIndex((e=>e&&e.getBoundingClientRect().top-100>0));return-1===e?e=t.length-1:e>0&&e--,t[e].id};d.addEventListener("scroll",window.tideClientUtils.throttleDebounce((()=>{if(window.tideGlobal.programmaticScroll)return;const e=n();history.replaceState(null,"","#"+e),window.tideUpdateActiveTocItemById(e)}))),h.addEventListener("click",(()=>{g.showModal()}))}}if(u&&u.addEventListener("click",(()=>{E.showModal()})),w){const e=document.getElementById("tide-page-interactions");w.addEventListener("click",(()=>{window.tideGlobal.setProgrammaticScroll(),window.location.hash="",window.location.hash="tide-page-interactions",window.tideSetActiveTocLink(null)})),e||(w.style.display="none")}S.addEventListener("click",(function(){void 0!==r.dataset.extraWidgetsExpanded||void 0!==r.dataset.extraWidgetsCollapsed?void 0===r.dataset.extraWidgetsExpanded?(r.dataset.extraWidgetsExpanded="",delete r.dataset.extraWidgetsCollapsed):(r.dataset.extraWidgetsCollapsed="",delete r.dataset.extraWidgetsExpanded):r.dataset.extraWidgetsExpanded=""})),h&&"none"!==h.style.display||u&&"none"!==u.style.display||w&&"none"!==w.style.display||(S.style.display="none")}forcedColorsQuery.addEventListener("change",(e=>handleForcedColorsChange(e.matches))),"loading"!==document.readyState?domContentLoadedHandler():document.addEventListener("DOMContentLoaded",domContentLoadedHandler),window.addEventListener("hexo-blog-decrypt",(function(){"tide-on-decryption-reload"===!window.location.hash?(window.location.hash="tide-on-decryption-reload",window.location.reload()):window.history.replaceState(null,"",window.location.pathname+window.location.search)}));
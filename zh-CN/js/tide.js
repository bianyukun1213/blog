"use strict";let clientCtx={};const clientCtxElement=document.querySelector('meta[name="tide-client-ctx"]');function getPageLang(){return document.documentElement.getAttribute("lang")}function isPageRtl(){return"rtl"===document.documentElement.getAttribute("dir")}clientCtxElement&&(clientCtx=JSON.parse(decodeURIComponent(clientCtxElement.getAttribute("content")))),document.addEventListener("error",(function(e){"img"===e.target.tagName.toLowerCase()&&(e.target.className+=" tide-broken-img")}),!0);class TideSettings{static#e="tide_settings";static version=1;static#t="SYSTEM";static get colorScheme(){return this.#t}static set colorScheme(e){"SYSTEM"!==e&&"LIGHT"!==e&&"DARK"!==e||(this.#t=e,this.#n())}static#o(){let e=localStorage.getItem(this.#e)??"{}";try{e=JSON.parse(e)}catch(t){e={}}clientUtils.isPlainObject(e)||(e={}),e=this.#d(e),this.colorScheme=e.colorScheme}static#d(e){return(!(e=clientUtils.deepClone(e)).version||e.version<1)&&(e.colorScheme="SYSTEM",e.version=1),e}static#n(){const e={version:this.version,colorScheme:this.colorScheme};localStorage.setItem(this.#e,JSON.stringify(e))}static{this.#o()}}function systemColorSchemeChanged(){TideSettings.colorScheme="SYSTEM",delete document.documentElement.dataset.colorScheme}const darkModePreference=window.matchMedia("(prefers-color-scheme: dark)");darkModePreference.addEventListener("change",(e=>e.matches&&systemColorSchemeChanged()));const lightModePreference=window.matchMedia("(prefers-color-scheme: light)");function domContentLoadedHandler(e){const t=document.getElementById("tide-root"),n=[...document.querySelectorAll("#tide-sidebar a")],o=document.getElementById("tide-main-content"),d=[...document.getElementsByClassName("tide-btn-unmask-image")],i=document.getElementById("tide-btn-nav"),c=document.getElementById("tide-btn-search"),a=document.getElementById("tide-dialog-search"),s=document.getElementById("tide-btn-color-scheme"),l=document.getElementById("tide-btn-settings"),r=document.getElementById("tide-floating-widgets"),m=document.getElementById("tide-btn-top"),g=document.getElementById("tide-btn-toc"),h=document.getElementById("tide-dialog-toc"),u=document.getElementById("tide-btn-langs"),E=document.getElementById("tide-dialog-lang-picker"),S=document.getElementById("tide-btn-interactions"),y=document.getElementById("tide-btn-extra-widgets");function f(e){if(e){t.dataset.sidebarExpanded="";for(const e of n)e.removeAttribute("tabindex")}else{delete t.dataset.sidebarExpanded;for(const e of n)e.setAttribute("tabindex","-1")}}function p(){window.matchMedia("(orientation: landscape) and (min-width: 1280px)").matches?f(!0):f(!1)}for(const e of d)e.addEventListener("click",(function(e){e.target.parentElement.parentElement.nextElementSibling.dataset.unmasked=""})),e.addEventListener("keydown",(function(e){if("Space"===e.code){e.preventDefault();e.target.parentElement.parentElement.nextElementSibling.dataset.unmasked=""}}));if(window.addEventListener("resize",(()=>{p()})),p(),i.addEventListener("click",(function(e){""===t.dataset.sidebarExpanded?f(!1):f(!0)})),c&&c.addEventListener("click",(()=>{a.showModal()})),s.addEventListener("click",(function(e){let t;"light"===document.documentElement.dataset.colorScheme?t="LIGHT":"dark"===document.documentElement.dataset.colorScheme&&(t="DARK"),t||(t=darkModePreference.matches?"DARK":"LIGHT"),"LIGHT"===t?darkModePreference.matches?(TideSettings.colorScheme="SYSTEM",delete document.documentElement.dataset.colorScheme):(TideSettings.colorScheme="DARK",document.documentElement.dataset.colorScheme="dark"):"DARK"===t&&(lightModePreference.matches?(TideSettings.colorScheme="SYSTEM",delete document.documentElement.dataset.colorScheme):(TideSettings.colorScheme="LIGHT",document.documentElement.dataset.colorScheme="light"))})),l.addEventListener("click",(function(e){const t=document.getElementsByTagName("html")[0];isPageRtl()?t.setAttribute("dir","ltr"):t.setAttribute("dir","rtl")})),m.addEventListener("click",(()=>{o.scrollTo({top:0,behavior:"smooth"})})),g&&(g.addEventListener("click",(()=>{h.showModal()})),0===document.getElementsByClassName("tide-toc").length&&(g.style.display="none")),u&&u.addEventListener("click",(()=>{E.showModal()})),S){const e=document.getElementById("tide-page-interactions");S.addEventListener("click",(function(){e?document.getElementById("tide-main-content").scrollTo({top:e.offsetTop,behavior:"smooth"}):window.location.hash="tide-page-interactions"})),e||(S.style.display="none")}y.addEventListener("click",(function(){void 0===r.dataset.extraWidgets?r.dataset.extraWidgets="":delete r.dataset.extraWidgets})),g&&"none"!==g.style.display||u&&"none"!==u.style.display||S&&"none"!==S.style.display||(y.style.display="none")}lightModePreference.addEventListener("change",(e=>e.matches&&systemColorSchemeChanged())),"LIGHT"===TideSettings.colorScheme?document.documentElement.dataset.colorScheme="light":"DARK"===TideSettings.colorScheme&&(document.documentElement.dataset.colorScheme="dark"),"loading"!==document.readyState?domContentLoadedHandler():document.addEventListener("DOMContentLoaded",domContentLoadedHandler),window.addEventListener("hexo-blog-decrypt",(function(){window.location.hash.includes("tide-on-decryption-reload")?window.location.hash=window.location.hash.replace("tide-on-decryption-reload",""):(window.location.hash="tide-on-decryption-reload",window.location.reload())}));